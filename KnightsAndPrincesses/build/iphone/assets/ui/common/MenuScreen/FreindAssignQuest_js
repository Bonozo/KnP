function FreindAssignQuest(e,t){function i(e,t){return"x"==e?a*t/100:"y"==e?r*t/100:void 0}var n=Ti.Platform.osname,o=require("/ui/common/drawings/AvatarThumbnail"),a=Titanium.Platform.displayCaps.platformWidth,r=Titanium.Platform.displayCaps.platformHeight,d=Ti.UI.createWindow({orientation:Ti.UI.PORTRAIT,navBarHidden:!0,fullscreen:!0});d.orientationModes=[Ti.UI.PORTRAIT,Ti.UI.UPSIDE_PORTRAIT];var s=Titanium.UI.createView({backgroundColor:"#FFFFFF",borderRadius:10,borderColor:"#333333",borderWidth:"5dip",visible:!1,height:"8%",width:a/2,left:i("x",50)-a/4,top:i("x",42),zIndex:700}),c=Ti.UI.createActivityIndicator({color:"#333333",font:{fontSize:"14dip",fontWeight:"bold"},message:"Loading...",style:"iPhone OS"===Ti.Platform.name?Ti.UI.iPhone.ActivityIndicatorStyle.DARK:Ti.UI.ActivityIndicatorStyle.DARK,height:"100%",width:"100%"});s.add(c),d.add(s),function(){c.show(),s.visible=!0,c.message="Loading..."}();var l,u=Titanium.UI.createView({width:"100%",height:"100%",backgroundImage:"/assets/inventoryBackground.png"});d.add(u);var p=Titanium.UI.createView({backgroundImage:"/assets/footerSlim_001.png",height:"8%",width:"100%",top:"0%"});u.add(p);var f=Titanium.UI.createLabel({text:e.Record[0].NAME,left:"3%",textAlign:"left",color:"#5afd9b",font:{fontWeight:"bold",fontSize:"16dip"},zIndex:100});p.add(f);var m=Titanium.UI.createLabel({text:"Assign Quest",right:"15.6%",textAlign:"right",color:"#5afd9b",font:{fontSize:"14dip"},zIndex:100});p.add(m);var h=Ti.UI.createImageView({image:"/assets/iconReturn.png",width:"11.6%",top:"1%",right:"3%"});u.add(h),h.addEventListener("click",function(){d.close()});var g=Ti.UI.createView({width:"100%",top:"9%",height:"16%"}),T=(Titanium.UI.createImageView({backgroundImage:"/assets/rowview_bg.png",height:"96%",width:"100%"}),Titanium.UI.createLabel({top:"0",left:"2%",textAlign:"right",color:"#5afd9b",font:{fontSize:"18dip",fontWeight:"bold"}}));g.add(T);var v=Titanium.UI.createLabel({text:"",left:"2%",textAlign:"right",color:"#5afd9b",font:{fontSize:"16dip"}});g.add(v);var I=Titanium.UI.createLabel({bottom:"0",left:"10%",textAlign:"right",color:"#5afd9b",font:{fontSize:"14dip"}});g.add(I);var b=Ti.UI.createImageView({image:"/assets/iconFriends.png",width:"7.5%",height:"30%",bottom:0,left:"2%"});g.add(b);var _,E=0,R="http://bonozo.com:8080/knp/get_avatar_info.php?uid="+t,w=require("/ui/common/Functions/function");w.requestServer({success:function(){items_json=JSON.parse(this.responseText),void 0!=items_json.Record&&""!=items_json.Record.Message&&(o({width:"100%",height:"100%",top:"0dip",right:"0%"},items_json.Record[0].USER_APPEARANCE,items_json.Record[0].GENDER,0,function(e){U.add(e)}),T.text=items_json.Record[0].NAME,v.text=items_json.Record[0].STATUS_MESSAGE,l=items_json.Record[0].GENDER,x.text="LVL "+items_json.Record[0].LEVEL,I.text=items_json.Record[0].NUM_OF_FRIENDS+" friend(s)",S.text=items_json.Record[0].NUM_OF_GOLDS,user_id=items_json.Record[0].USER_ID,E++,E>=2&&(c.hide(),s.visible=!1))},method:"GET",contentType:"text/xml",url:R}),_="f"==l?"/assets/female_icon.png":"/assets/male_icon.png";var U=Titanium.UI.createView({right:"0%",width:"20%"});g.add(U);var x=Titanium.UI.createLabel({top:"0",right:"22%",textAlign:"right",color:"#5afd9b",font:{fontSize:"14dip"}});g.add(x);var S=Titanium.UI.createLabel({right:"30%",textAlign:"right",color:"#5afd9b",font:{fontSize:"14dip"}}),A=Titanium.UI.createImageView({image:"/assets/miGoldWide_up.png",right:"20%",width:"8%",height:"30%"});g.add(A),g.add(S),A.addEventListener("touchstart",function(){A.image="/assets/miGoldWide_down.png"}),A.addEventListener("touchend",function(){A.image="/assets/miGoldWide_up.png"});Titanium.UI.createLabel({text:"ONLINE",bottom:"0%",right:"22%",textAlign:"right",color:"#5afd9b",font:{fontSize:"14dip"}});u.add(g);var L=Titanium.UI.createView({backgroundImage:"/assets/infoBarBG.png",top:"25%",height:"5.5%"});u.add(L);var y=Titanium.UI.createLabel({text:"ASSIGN QUESTS: MAKE THEM WORK FOR IT!",top:"26%",textAlign:"right",color:"#5afd9b",font:{fontSize:"12dip",fontWeight:"bold"},zIndex:100});u.add(y);var k=Ti.UI.createLabel({text:"Selected Quests",color:"#5AFD9B",font:{fontSize:"12dip",fontWeight:"bold"},top:"31%",left:"15%"});u.add(k);var N=0,C=Ti.UI.createLabel({text:N,color:"#5AFD9B",font:{fontSize:"12dip",fontWeight:"bold"},top:"35%",left:"20%"});u.add(C);var P=Ti.UI.createLabel({text:"Time limit (hours)",color:"#5AFD9B",font:{fontSize:"12dip",fontWeight:"bold"},top:"31%",right:"15%"});u.add(P);var F=48,D=Ti.UI.createView({top:"35%",right:"8%",height:"7%",width:"40%"});u.add(D);var z=Ti.UI.createImageView({image:"/assets/iconControlArrowLeft.png",right:0,height:"100%"});D.add(z),z.addEventListener("click",function(){q.text=++F});var M=Ti.UI.createImageView({image:"/assets/iconControlArrowRight.png",left:0,height:"100%"});D.add(M),M.addEventListener("click",function(){q.text=F>1?--F:F});var q=Ti.UI.createLabel({text:F,color:"#5AFD9B",font:{fontSize:"12dip",fontWeight:"bold"},textAlign:"center"});D.add(q);var O=(Ti.UI.createLabel({text:"HOURS",color:"#5AFD9B",font:{fontSize:"12dip"},left:"40%",textAlign:"center"}),1),V=[],G=(Titanium.Platform.displayCaps.platformHeight,Titanium.Platform.displayCaps.platformWidth),B=.15*G,W=[],w=require("/ui/common/Functions/function"),j="http://bonozo.com:8080/knp/get_all_quests.php",K=[];w.requestServer({success:function(){if(items_json=JSON.parse(this.responseText),void 0!=items_json.Record){for(var e=0;e<items_json.Record.length;e++){var t=Titanium.UI.createTableViewRow({backgroundImage:"/assets/listQuest001_up.png",height:"iphone"===n||"ipad"===n?"37%":B+"px",quest_id:items_json.Record[e].QUEST_ID,backgroundColor:"#0b4129",quest_name:items_json.Record[e].QUEST_NAME,index:e,zIndex:100,selected:!1,touchEnabled:!0});t.addEventListener("click",function(e){1==e.row.selected?(e.row.selected=!1,K[e.row.index].image="/assets/tradeToggle_no.png",delete W[e.row.index],N--):(e.row.selected=!0,K[e.row.index].image="/assets/tradeToggle_yes.png",W[e.row.index]=e.row.quest_id,N++),C.text=N}),"Archery"==items_json.Record[e].QUEST_NAME?quest_image="/assets/iconArchery.png":"Sonnet"==items_json.Record[e].QUEST_NAME?quest_image="/assets/iconSonnet.png":"Joust"==items_json.Record[e].QUEST_NAME?quest_image="/assets/iconJoust.png":"Cooking"==items_json.Record[e].QUEST_NAME&&(quest_image="/assets/iconThickBook.png");{Ti.UI.createImageView({image:quest_image,height:B+"px",left:"5%",top:"5%"})}K[e]=Ti.UI.createImageView({image:"/assets/tradeToggle_no.png",width:"8%",left:"2%",top:"10%"}),t.add(K[e]);var i=Ti.UI.createLabel({text:"QUEST "+O,color:"#083322",font:{fontSize:"10dip",fontWeight:"bold"},bottom:"8%",left:"2%"});t.add(i);var o=Ti.UI.createLabel({text:items_json.Record[e].QUEST_NAME,color:"#5AFD9B",font:{fontSize:"18dip",fontWeight:"bold"},top:"10%",left:"12%"});t.add(o);var a=Ti.UI.createLabel({text:items_json.Record[e].QUEST_DESCRIPTION,color:"#5AFD9B",font:{fontSize:"14dip",fontWeight:"bold"},right:"0%"});t.add(a);var r=Ti.UI.createLabel({text:"(TAP TO CHOOSE)",color:"#5AFD9B",font:{fontSize:"12dip"},bottom:"3%"});t.add(r),O++,V.push(t)}var d=Ti.UI.createTableView({backgroundColor:"transparent",separatorColor:"transparent",data:V,width:"100%",height:"28%",top:"41%",zIndex:200});u.add(d)}Ti.App.fireEvent("update_xp",{clicked_item:"StatusScreen"}),E++,E>=2&&(c.hide(),s.visible=!1)},method:"GET",contentType:"text/xml",url:j});var Y=Titanium.UI.createImageView({left:"10%",top:"70%",width:"80%",height:"12%",image:"/assets/inputButton002_up.png",zIndex:800}),H=Titanium.UI.createTextField({color:"#5AFD9B",top:"70%",width:"70%",hintText:"Your Message",height:"12%",paddingLeft:"3",backgroundColor:"transparent",zIndex:900});u.add(Y),u.add(H),("iphone"===n||"ipad"===n)&&(H.addEventListener("focus",function(){Y.animate({top:i("y",40),duration:500}),H.animate({top:i("y",40),duration:500})}),H.addEventListener("blur",function(){Y.animate({top:"70%",duration:500}),H.animate({top:"70%",duration:500})}));var J=Ti.UI.createButton({color:"#761f56",backgroundGradient:{type:"linear",colors:[" #A42B76","#E39bc8"],startPoint:{x:"50%",y:"100%"},endPoint:{x:"50%",y:"0%"},backFillStart:!1},font:{fontSize:"16dip",fontWeight:"bold"},borderColor:"#A42B76",borderRadius:"2",title:"Assign Quest",height:"6.5%",bottom:"11%",width:"35%"});u.add(J),J.addEventListener("click",function(){for(var i="",n=0;n<W.length;n++)""!=W[n]&&void 0!=W[n]&&(i=i+","+W[n]);if(""==i)alert("Please Select atleast One Quest.");else{var o=Titanium.UI.createAlertDialog({title:"Click 'Yes' to assign Quest.",message:"Sure?",buttonNames:["Yes","No"],cancel:1});o.addEventListener("click",function(n){if(Titanium.API.info("e = "+JSON.stringify(n)),n.cancel!==n.index&&n.cancel!==!0)switch(n.index){case 0:var o="http://bonozo.com:8080/knp/knp_assign_quests.php?assign_by_uid="+e.Record[0].UID+"&assign_to_uid="+t+"&quest_ids="+i+"&message="+Ti.Network.encodeURIComponent(H.value)+"&num_of_hours="+F+"&status=INCOMPLETE&user_id="+user_id,a=require("/ui/common/Functions/function");a.requestServer({success:function(){if(items_json=JSON.parse(this.responseText),void 0!=items_json.Record&&""!=items_json.Record[0].Message){var e=Titanium.UI.createAlertDialog({title:"Assigned Quest.",message:items_json.Record[0].Message,buttonNames:["OK"]});e.show(),e.addEventListener("click",function(){d.close()}),H.value=""}},method:"GET",contentType:"text/xml",url:o});break;case 1:}}),o.show()}});var Q="http://bonozo.com:8080/knp/get_avatar_info.php?uid="+e.Record[0].UID,w=require("/ui/common/Functions/function");return w.requestServer({success:function(){if(items_json=JSON.parse(this.responseText),void 0!=items_json.Record){var e=require("ui/common/menus/Footer"),t=e(items_json);u.add(t),Ti.App.fireEvent("update_footer",{clicked_item:"FriendRequestAction"})}},method:"GET",contentType:"text/xml",url:Q}),d}module.exports=FreindAssignQuest;