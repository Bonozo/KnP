function SinglePlayGame(e,t,i,n){function o(){m++}if("joust_game"==e){var a=require("/ui/common/MenuScreen/JoustinGamePlay"),r=new a("INCOMPLETE",80000003,n,"",!0);return r}if("archery_game"==e){var s=require("/ui/common/games/ArcheryMainGame"),d=new s("INCOMPLETE",80000001,n,"",!0);return d}if("cooking_game"==e){var c=require("/ui/common/MenuScreen/CookingGame"),l=new c("INCOMPLETE",80000004,n,"",!0);return l}if("sonnet_game"==e){var u=require("/ui/common/MenuScreen/SonnetGamePlay"),p=new u("INCOMPLETE",80000002,n,"",!0);return p}var h=!1,g="",m=0,f=Ti.UI.createWindow({orientation:Ti.UI.PORTRAIT,navBarHidden:!0,fullscreen:!0});f.orientationModes=[Ti.UI.PORTRAIT,Ti.UI.UPSIDE_PORTRAIT];var T="http://bonozo.com:8080/knp/knp_assign_quests.php?assign_by_uid="+n.Record[0].UID+"&assign_to_uid="+n.Record[0].UID+"&quest_ids="+i+"&message=Single Player Game&num_of_hours=3&status=SINGLE_PLAYER_GAME",I="",v=0,E=require("/ui/common/Functions/function");E.requestServer({success:function(){if(I=JSON.parse(this.responseText),v=I.Record.length,void 0!=I.Record){if(I.Record[0].LOW_ENERGY){var e=Titanium.UI.createAlertDialog({title:"Low Energy!",message:I.Record[0].LOW_ENERGY,buttonNames:["OK"]});e.show(),e.addEventListener("click",function(){f.close()})}else g=I.Record[0].ASSIGN_QUEST_ID;o()}},method:"GET",contentType:"text/xml",url:T});var _=Ti.UI.createImageView({image:"/assets/"+e+".png",width:"100%",height:"100%",top:0,left:0});return _.addEventListener("load",function(){o()}),_.addEventListener("click",function(){h?alert("You have already played this quest!\nPress back button"):(T="http://bonozo.com:8080/knp/knp_set_quest_status.php?game_status=COMPLETE&quest_status="+t+"&assign_quest_id="+g+"&quest_id="+i+"&uid="+n.Record[0].UID+"&friend_uid="+n.Record[0].UID,E.requestServer({success:function(){if(I=JSON.parse(this.responseText),void 0!=I.Record&&"Updated!"==I.Record[0].Message){Ti.App.fireEvent("game_played",{status:"complete"});var e=0,t="",i="";for(var n in I.Record[0]){if(I.Record[0].hasOwnProperty(n)){{n+" -> "+I.Record[0][n]}1==e?t=I.Record[0][n]:e>1&&(i+="\n"+n+"("+I.Record[0][n]+")")}e++}var o=Titanium.UI.createAlertDialog({title:"You have completed "+t+".",message:"Rewards earned:"+i,buttonNames:["OK"]});o.show(),o.addEventListener("click",function(){f.close()})}Ti.App.fireEvent("update_xp",{clicked_item:"StatusScreen"})},method:"GET",contentType:"text/xml",url:T}),h=!0)}),f.add(_),f}module.exports=SinglePlayGame;