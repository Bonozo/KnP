function CookingGame(e,t,i){var n=Ti.UI.createWindow({orientation:Ti.UI.PORTRAIT,backgroundImage:"assets/inventoryBackground.png",navBarHidden:!0,fullscreen:!0});n.orientationModes=[Ti.UI.PORTRAIT,Ti.UI.UPSIDE_PORTRAIT];var a=Titanium.UI.createImageView({image:"/assets/overlayPlayerInfoCroped.png",height:"6.4%",width:"100%",bottom:"94.6%"});n.add(a);var r=Titanium.UI.createLabel({text:i.Record[0].NAME,top:"0",height:"3.1%",left:"3%",textAlign:"left",color:"#5afd9b",font:{fontWeight:"bold",fontSize:"12dip"}});n.add(r);var o=Titanium.UI.createLabel({text:"back",top:"0",height:"3.1%",right:"8%",textAlign:"left",color:"#5afd9b",font:{fontWeight:"bold",fontSize:"12dip"}});n.add(o);var d=Titanium.UI.createImageView({image:"/assets/iconReturn.png",height:"8%",width:"11.6%",top:"1%",right:"3%"});n.add(d),d.addEventListener("click",function(){n.close()});var s=Ti.UI.createLabel({text:"Cooking",color:"#5afd9b",font:{fontWeight:"bold",fontSize:"16dip"},top:"10%",left:"5%",textAlign:"center"});n.add(s);var c=Ti.UI.createButton({color:"#761f56",title:"Use Existing Recipe",top:"20%",backgroundImage:"/assets/button_large_UP.png",height:"10%",width:"60%"});c.addEventListener("click",function(){var e=require("/ui/common/games/CookingRecipes"),t=new e(i);t.open()}),n.add(c);var l=function(e,t,i,n,a,r){return{total_sec:60*e*60+60*t+i,timer:this.timer,instance_index:n,set:function(e,t,i){return this.total_sec=60*parseInt(e)*60+60*parseInt(t)+parseInt(i),this.time={h:e,m:t,s:i},this},start:function(){var e=this;return this.timer=setInterval(function(){if(e.total_sec){e.total_sec--;var t=parseInt(e.total_sec/3600),i=(e.total_sec-parseInt(3600*t)-e.total_sec%60)/60;e.time={h:parseInt(e.total_sec/3600),m:parseInt(i),s:e.total_sec%60},a(e.time.h+":"+e.time.m+":"+e.time.s,e.instance_index)}else e.stop(),r()},1e3),this},stop:function(){return clearInterval(this.timer),this.time={h:0,m:0,s:0},this.total_sec=0,this}}},u="http://bonozo.com:8080/knp/get_avatar_cookings.php?uid="+i.Record[0].UID,p="",f=0,m=[],h=[],g=(Titanium.Platform.displayCaps.platformHeight,Titanium.Platform.displayCaps.platformWidth),v=.225*g,T=[],I="",b=require("/ui/common/Functions/function");return b.requestServer({success:function(){if(p=JSON.parse(this.responseText),f=p.Record.length,void 0!=p.Record){for(var e=0;e<p.Record.length;e++){var t=Ti.UI.createTableViewRow({height:v,className:"active_cooking",uid:p.Record[e].ID,index:e,backgroundImage:"/assets/overlayItemList_highlight.png",zIndex:10}),i=Ti.UI.createLabel({text:p.Record[e].NAME,font:{fontSize:"20dip"},color:"#b3fad0",left:"8%",top:"10%"});t.add(i);var a=Ti.UI.createLabel({text:p.Record[e].START_TIME,font:{fontSize:"16dip"},color:"#b3fad0",left:"8%",top:"60%"});if(t.add(a),T[p.Record[e].ID]=Ti.UI.createLabel({text:"COMPLETED"!=p.Record[e].STATUS?"TIME LEFT "+p.Record[e].REMAINING_TIME:"Item is in inventory.",font:{fontSize:"15dip"},color:"#b3fad0",right:"5%"}),t.add(T[p.Record[e].ID]),"COMPLETED"!=p.Record[e].STATUS&&"EXPIRE"!=p.Record[e].STATUS){var r=p.Record[e].REMAINING_TIME.split(":");h[p.Record[e].ID]=new l(parseInt(r[0]),parseInt(r[1]),parseInt(r[2]),p.Record[e].ID,function(e,t){T[t].text="TIME LEFT "+e},function(){}),h[p.Record[e].ID].start()}m.push(t)}I=Ti.UI.createTableView({backgroundColor:"transparent",separatorColor:"transparent",data:m,width:"100%",height:"65%",top:"30%"}),n.add(I)}},method:"GET",contentType:"text/xml",url:u}),Ti.App.addEventListener("start_cooking",function(e){""!=I&&(n.remove(I),I="");var t=require("/ui/common/Functions/function");t.requestServer({success:function(){if(p=JSON.parse(this.responseText),f=p.Record.length,void 0!=p.Record){for(var t=0;t<p.Record.length;t++){var i=Ti.UI.createTableViewRow({height:v,uid:p.Record[t].ID,index:t,backgroundImage:"/assets/overlayItemList_highlight.png",zIndex:10}),a=Ti.UI.createLabel({text:p.Record[t].NAME,font:{fontSize:"20dip"},color:"#b3fad0",left:"8%",top:"10%"});i.add(a);var r=Ti.UI.createLabel({text:p.Record[t].START_TIME,font:{fontSize:"16dip"},color:"#b3fad0",left:"8%",top:"60%"});if(i.add(r),T[p.Record[t].ID]=Ti.UI.createLabel({text:"COMPLETED"!=p.Record[t].STATUS?"TIME LEFT "+p.Record[t].REMAINING_TIME:"Item is in inventory.",font:{fontSize:"15dip"},color:"#b3fad0",right:"5%"}),i.add(T[p.Record[t].ID]),"COMPLETED"!=p.Record[t].STATUS&&"EXPIRE"!=p.Record[t].STATUS){var o=p.Record[t].REMAINING_TIME.split(":");h[p.Record[t].ID]=new l(parseInt(o[0]),parseInt(o[1]),parseInt(o[2]),p.Record[t].ID,function(e,t){T[t].text="TIME LEFT "+e},function(){}),h[p.Record[t].ID].start()}m.push(i)}I=Ti.UI.createTableView({backgroundColor:"transparent",separatorColor:"transparent",data:m,width:"100%",height:"65%",top:"30%"}),n.add(I),alert(e.message)}},method:"GET",contentType:"text/xml",url:u})}),n.open({fullscreen:!0,navBarHidden:!0}),n}module.exports=CookingGame;