function crafting(e){var t=Titanium.Platform.displayCaps.platformWidth,i=Titanium.UI.createWindow({navBarHidden:!0,fullscreen:!0,backgroundImage:"/assets/inventoryBackground.png",navBarHidden:!0,fullscreen:!0}),n=require("ui/common/menus/Footer"),o=new n(e);i.add(o);var a=Titanium.UI.createImageView({image:"/assets/overlayPlayerInfoCroped.png",height:"6.4%",width:"100%",bottom:"94.6%"});i.add(a);var r=Titanium.UI.createLabel({text:"Crafting",top:"0.8%",height:"3.1%",left:"3%",textAlign:"left",color:"#5afd9b",font:{fontWeight:"bold",fontSize:"14dip"}});i.add(r);var s=Titanium.UI.createLabel({text:"Back",top:"0.8%",height:"3.1%",right:"15.6%",textAlign:"right",color:"#5afd9b",font:{fontSize:"12dip"}});i.add(s);var d=Titanium.UI.createImageView({width:"11.6%",top:"0.3%",right:"3%",image:"/assets/iconReturn.png"});i.add(d),d.addEventListener("click",function(){i.close()});var c="",l=0,u=require("/ui/common/Functions/function");u.requestServer({success:function(){if(c=JSON.parse(this.responseText),l=c.Record.length,void 0!=c.Record){for(var n=.15*t,o=[],a=0;a<c.Record.length;a++){var r=Ti.UI.createTableViewRow({height:n,craft_ingredients:c.Record[a].INGREDIENTS,craft_name:c.Record[a].CRAFT_NAME});r.addEventListener("click",function(){});var s=Titanium.UI.createImageView({image:"/assets/inv_128/"+c.Record[a].IMAGE+".png",width:"13%",left:"5px"});r.add(s);var d=Ti.UI.createLabel({text:c.Record[a].CRAFT_NAME+"",font:{fontSize:"14dip"},color:"#5afd9b",left:"15%",width:"45%"});r.add(d);var u=Titanium.UI.createButton({color:"#761f56",backgroundImage:"/assets/button_small_UP.png",width:"20%",height:"60%",title:"Details",craft_id:c.Record[a].CRAFT_ID,craft_name:c.Record[a].CRAFT_NAME,font:{fontSize:14,fontWeight:"bold"},right:"22%",craft_ingredients:c.Record[a].INGREDIENTS,craft_name:c.Record[a].CRAFT_NAME,craft_description:c.Record[a].CRAFT_DESCRIPTION});r.add(u),u.addEventListener("click",function(e){var t=require("ui/common/MenuScreen/ShowCraftingRecipe"),i=new t(e.source.craft_name,e.source.craft_description,e.source.craft_ingredients);i.open({modal:!0})});var p=Titanium.UI.createButton({color:"#761f56",backgroundImage:"/assets/button_small_UP.png",width:"20%",height:"60%",title:"Craft",craft_id:c.Record[a].CRAFT_ID,craft_name:c.Record[a].CRAFT_NAME,font:{fontSize:14,fontWeight:"bold"},right:"1%"});r.add(p),p.addEventListener("click",function(t){var i=Titanium.UI.createAlertDialog({title:"Click 'Yes' to create "+t.source.craft_name+".",message:"Sure?",buttonNames:["Yes","No"],craft_id:t.source.craft_id,cancel:1});i.addEventListener("click",function(t){if(Titanium.API.info("e = "+JSON.stringify(t)),t.cancel!==t.index&&t.cancel!==!0)switch(t.index){case 0:var i="http://bonozo.com:8080/knp/create_craft.php?uid="+e.Record[0].UID+"&craft_id="+t.source.craft_id,n=require("/ui/common/Functions/function");n.requestServer({success:function(){c=JSON.parse(this.responseText),void 0!=c.Record?void 0!=c.Record.Message?(alert(c.Record.Message),Ti.App.fireEvent("update_inv_grid",{})):void 0!=c.Record.Error&&alert(c.Record.Error):alert("Something went wrong, please try again later.")},method:"GET",contentType:"text/xml",url:i});break;case 1:}}),i.show()}),o.push(r)}var g=Ti.UI.createTableView({backgroundColor:"transparent",separatorColor:"transparent",data:o,width:"100%",height:"70.3%",top:"8%"});i.add(g)}},method:"GET",contentType:"text/xml",url:"http://bonozo.com:8080/knp/get_craft_ingredients.php"});var u=require("/ui/common/Functions/function");return u.requestServer({success:function(){var e=JSON.parse(this.responseText);if(void 0!=e.Record){var t=require("ui/common/menus/Footer"),n=new t(e);i.add(n)}},method:"GET",contentType:"text/xml",url:"http://bonozo.com:8080/knp/get_avatar_info.php?uid="+e.Record[0].UID}),i.addEventListener("android:back",function(){i.close(),i=null}),i}module.exports=crafting;