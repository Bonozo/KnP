function FreindsScreen(e){function t(e){r.length=0,d.length=0,e()}function i(e,i,n){t(function(){var t=require("ui/common/MenuScreen/"+i);t(e,r,d,function(e){n(e)})})}function n(e,t){return"x"==e?s*t/100:"y"==e?p*t/100:void 0}function o(t){Ti.App.fireEvent("avatar_table_changed",{release_table:c,new_table:t}),c=t,a.data=null,u.remove(a),a=null,i(e,c,function(e){a=e,u.add(a),l=!l,m.hide(),f.visible=!1})}var a,r=[],d=[],s=Titanium.Platform.displayCaps.platformWidth,c="AvatarByFriends",l=!0,u=Titanium.UI.createView({top:"23.5%",height:"78%",width:"100%"}),p=Titanium.Platform.displayCaps.platformHeight,f=(Ti.UI.createView(),Titanium.UI.createView({backgroundColor:"#FFFFFF",borderRadius:10,borderColor:"#333333",borderWidth:"5dip",visible:!1,height:"8%",width:s/2,left:n("x",50)-s/4,top:n("x",42),zIndex:700})),m=Ti.UI.createActivityIndicator({color:"#333333",font:{fontSize:"14dip",fontWeight:"bold"},message:"Loading...",style:"iPhone OS"===Ti.Platform.name?Ti.UI.iPhone.ActivityIndicatorStyle.DARK:Ti.UI.ActivityIndicatorStyle.DARK,height:"100%",width:"100%"});f.add(m),u.add(f),m.show(),f.visible=!0;Ti.UI.createView({zIndex:200,backgroundGradient:{type:"linear",colors:["#3258ad","#010f49"],startPoint:{x:"50%",y:"0%"},endPoint:{x:"50%",y:"100%"},backFillStart:!1},width:"100%",height:"100%"});i(e,c,function(e){a=e,u.add(a),l=!l,m.hide(),f.visible=!1});var h=Titanium.UI.createButton({color:"#761f56",title:"Gift Notifications",backgroundImage:"/assets/button_smallLong_UP.png",left:"2%",top:"70%",font:{fontSize:"12dip"},zIndex:600,width:"35%",height:"8%"});u.add(h),h.addEventListener("click",function(){var t=require("ui/common/MenuScreen/GiftNotifications"),i=new t(e);i.open()});var g,T,I="",v="";g=Titanium.UI.createImageView({image:"/assets/message_alert.png",width:"4%",height:n("x",4),right:"1.6%",bottom:"14.9%",zIndex:900,visible:!1}),u.add(g),Ti.App.addEventListener("NEW_REQUEST",function(e){g.zIndex=900,g.visible=e.status?!0:!1});var E="http://bonozo.com:8080/knp/get_notifications.php?uid="+e.Record[0].UID,b=require("/ui/common/Functions/function");b.requestServer({success:function(){items_json=JSON.parse(this.responseText),void 0!=items_json.Record&&(I=items_json.Record[0].REQUEST,v=items_json.Record[0].GIFT,"NEW_REQUEST"==I&&(g.visible=!0),"NEW_GIFT"==items_json.Record[0].GIFT&&(T=Titanium.UI.createImageView({image:"/assets/message_alert.png",width:"4%",height:"4%",left:"2.7%",bottom:"27%",zIndex:600}),u.add(T)))},method:"GET",contentType:"text/xml",url:E}),Ti.App.addEventListener("request_send",function(){g.hide()}),Ti.App.addEventListener("gift_Notification",function(){"NEW_GIFT"==v&&T.hide()});var _=Ti.UI.createButton({color:"#761f56",backgroundImage:"/assets/button_smallLong_UP.png",font:{fontSize:"9dip"},title:"REQUEST",width:"17%",height:"6.5%",right:"2.7%",bottom:"15.1%",zIndex:900});u.add(_),_.addEventListener("click",function(){l||(m.show(),f.visible=!0,o("AvatarByRequest"),l=!l)});var R=Ti.UI.createButton({color:"#761f56",backgroundImage:"/assets/button_smallLong_UP.png",font:{fontSize:"9dip"},title:"FRIENDS",width:"17%",height:"6.5%",right:"20.8%",bottom:"15.1%",zIndex:900});u.add(R),R.addEventListener("click",function(){l||(m.show(),f.visible=!0,o("AvatarByFriends"),l=!l)});var w=Ti.UI.createButton({color:"#761f56",backgroundImage:"/assets/button_smallLong_UP.png",font:{fontSize:"9dip"},title:"FEMALE",width:"17%",height:"6.5%",right:"37.9%",bottom:"15.1%",zIndex:900});u.add(w),w.addEventListener("click",function(){l||(m.show(),f.visible=!0,o("AvatarByFemale"),l=!l)});var U=Ti.UI.createButton({color:"#761f56",backgroundImage:"/assets/button_smallLong_UP.png",font:{fontSize:"9dip"},title:"MALE",width:"17%",height:"6.5%",right:"55%",bottom:"15.1%",zIndex:900});u.add(U),U.addEventListener("click",function(){l||(m.show(),f.visible=!0,o("AvatarByMale"),l=!l)});var S=(Ti.UI.createButton({color:"#761f56",backgroundImage:"/assets/button_smallLong_UP.png",font:{fontSize:"9dip"},title:"ONLINE",width:"17%",height:"6.5%",right:"2.7%",bottom:"21%",zIndex:900}),Ti.UI.createButton({color:"#761f56",backgroundImage:"/assets/button_smallLong_UP.png",font:{fontSize:"9dip"},title:"COIN",width:"17%",height:"6.5%",right:"2.7%",bottom:"21%",zIndex:900}));u.add(S),S.addEventListener("click",function(){l||(m.show(),f.visible=!0,o("AvatarByGold"),l=!l)});var A=Ti.UI.createButton({color:"#761f56",backgroundImage:"/assets/button_smallLong_UP.png",font:{fontSize:"9dip"},title:"LEVEL",width:"17%",height:"6.5%",right:"20.8%",bottom:"21%",zIndex:900});u.add(A),A.addEventListener("click",function(){l||(m.show(),f.visible=!0,o("AvatarByLevel"),l=!l)});Ti.UI.createLabel({text:"SORT",color:"#58fe9b",left:"10%",bottom:"18%",textAlign:"right",font:{fontWeight:"bold",fontSize:"14dip"}});return Ti.App.addEventListener("update_friend_list",function(t){u.remove(a),c=t.activeScreen,i(e,c,function(e){a=e,u.add(a)})}),u}module.exports=FreindsScreen;