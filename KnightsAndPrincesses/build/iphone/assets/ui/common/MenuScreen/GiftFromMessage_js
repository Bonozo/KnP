function GiftFromMessage(e,t){function i(i){var o=require("/ui/common/Functions/function");_url="http://bonozo.com:8080/knp/get_all_inventories.php?uid="+e.Record[0].UID,o.requestServer({success:function(){if(items_json=JSON.parse(this.responseText),void 0!=items_json.Record){for(var o=[],r=0,s=0;s<items_json.Record.length/p;s++){0==s&&(a.text=items_json.Record[r].NAME+"\n"+items_json.Record[r].DESCRIPTION+"\nQty : "+items_json.Record[r].TOTAL_UNIT,d.text="Value: "+items_json.Record[r].REQ_GOLD+" Gold",T.image="/assets/"+items_json.Record[r].IMAGE+".png",g.id=items_json.Record[r].ID,g.type=items_json.Record[r].CATEGORY);for(var c=Titanium.UI.createTableViewRow({height:m+"px"}),l=0,f=0;r<items_json.Record.length&&4>f;){var h=Ti.UI.createImageView({image:"/assets/singlebox.png",width:m+"px",height:m+"px",top:"0px",zIndex:50,left:l}),I=Ti.UI.createImageView({image:"/assets/inv_128/"+items_json.Record[r].IMAGE+".png",zIndex:100,width:m-2+"px",height:m-2+"px",left:l+1,name:items_json.Record[r].NAME,description:items_json.Record[r].DESCRIPTION,req_gold:items_json.Record[r].REQ_GOLD,total_unit:items_json.Record[r].TOTAL_UNIT,id:items_json.Record[r].ID,type:items_json.Record[r].CATEGORY});I.addEventListener("click",function(e){a.text=e.source.name+"\n"+e.source.description+"\nQty : "+e.source.total_unit,d.text="Value: "+e.source.req_gold+" Gold",T.image=e.source.image,g.id=e.source.id,g.type=e.source.type}),c.add(I),c.add(h),l+=m,r++,f++}o.push(c)}var v=Ti.UI.createTableView({backgroundColor:"transparent",separatorColor:"transparent",data:o,separatorColor:"transparent",width:u+"%",height:"35%",bottom:"20%",left:"16%"});i(v);var E=Titanium.UI.createButton({backgroundImage:"/assets/button_small_UP.png",title:"Gift",height:"6%",width:"16%",top:"26.2%",right:"7.7%"});n.add(E);var _=Titanium.UI.createButton({backgroundImage:"/assets/button_small_UP.png",title:"Cancel",height:"6%",width:"22%",top:"26.2%",right:"24.7%"});n.add(_),_.addEventListener("click",function(){n.close()}),E.addEventListener("click",function(){var i=Titanium.UI.createAlertDialog({title:"Click 'Yes' to Send Gift.",message:"Are you Sure?",buttonNames:["Yes","No"],cancel:1});i.show(),i.addEventListener("click",function(i){if(Titanium.API.info("e = "+JSON.stringify(i)),i.cancel!==i.index&&i.cancel!==!0)switch(i.index){case 0:var n="http://bonozo.com:8080/knp/send_gift.php?sender_id="+e.Record[0].UID+"&receiver_id="+t+"&gift_id="+g.id+"&gift_type="+g.type,o=require("/ui/common/Functions/function");o.requestServer({success:function(){items_json=JSON.parse(this.responseText),""!=items_json.Message&&Ti.App.fireEvent("update_inv_grid",{clicked_item:"GiftFromMessage"})},method:"GET",contentType:"text/xml",url:n});break;case 1:}})})}},method:"GET",contentType:"text/xml",url:_url})}var n=(Titanium.Platform.displayCaps.platformWidth,Titanium.UI.createWindow({orientation:Ti.UI.PORTRAIT,navBarHidden:!0,fullscreen:!0})),o=Ti.UI.createImageView({image:"/assets/itemWindow_001.png",opacity:"0.7",width:"90%",height:"25%",left:"5%",top:"10%"});n.add(o);var a=Titanium.UI.createLabel({top:"12.3%",left:"44%",textAlign:"left",color:"#5afd9b",font:{fontSize:"12dip"}});n.add(a);var r=Titanium.UI.createImageView({image:"/assets/iconReturn.png",height:"8%",width:"11.6%",top:"1%",right:"3%"});r.addEventListener("click",function(){n.close()});var d=Titanium.UI.createLabel({top:"23.3%",right:"7.9%",textAlign:"left",color:"#5afd9b",font:{fontSize:"10dip"}});n.add(d);var s=Titanium.UI.createImageView({image:"/assets/Chest.png",height:"45%",width:"86%",bottom:"0%",left:"7%"});n.add(s);var c=Titanium.UI.createImageView({url:"/assets/grid.png",height:"35%",width:"68%",bottom:"20%",left:"16%"});c.addEventListener("load",function(){});var l=Titanium.Platform.displayCaps.platformWidth,u=80,p=4,f=u/100*l,m=f/p,g={},h=[];i(function(e){h.TableviewCallback=e,n.add(h.TableviewCallback)}),Ti.App.addEventListener("update_inv_grid",function(){i(function(e){n.remove(h.TableviewCallback),h.TableviewCallback=null,h.TableviewCallback=e,n.add(h.TableviewCallback)})});var T=Titanium.UI.createImageView({height:"20%",width:"24.1%",top:"12.1%",left:"9%"});return T.addEventListener("load",function(){}),n.add(T),n}module.exports=GiftFromMessage;