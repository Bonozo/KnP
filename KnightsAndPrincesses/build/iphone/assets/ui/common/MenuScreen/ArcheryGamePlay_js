function ArcheryGamePlay(e,t,r){function i(e,t){return"x"==e?l*t/100:"y"==e?p*t/100:void 0}function n(e,t){return e*t}function a(){y.x=0,y.y=p-_,y.height=_,y.width=g,v.scale(1),v.x=i("x",50)-f/2,v.y=i("y",50)-f/2,P.width=x,P.height=S,P.x=i("x",53)-x/2,P.y=p-S,h.x=0,h.y=0,h.scale(1)}var o=Ti.UI.createWindow({orientation:Ti.UI.PORTRAIT,navBarHidden:!0,fullscreen:!0}),s=!1;o.orientationModes=[Ti.UI.PORTRAIT,Ti.UI.UPSIDE_PORTRAIT];var d=require("com.googlecode.quicktigame2d"),c=d.createGameView();c.fps=30,c.color(0,0,0),c.debug=!0;var u=(new Array,d.createScene()),l=Ti.Platform.displayCaps.platformWidth,p=Ti.Platform.displayCaps.platformHeight;c.pushScene(u);var m=1,h=d.createSprite({image:"assets/games/archery/background.png",width:l,height:p});u.add(h);var f=i("x",30),v=d.createSprite({image:"assets/games/archery/bullseye.png",width:f,height:f,x:i("x",50)-f/2,y:i("y",50)-f/2,z:400});u.add(v);var T=1.78515625,g=i("x",55),_=n(g,T),y=d.createSprite({image:"assets/games/archery/bow.png",width:g,height:_,x:0,y:p-_,z:500});u.add(y);var I=3.5555,x=i("x",20),S=n(x,I),P=d.createSprite({image:"assets/games/archery/arrow.png",width:x,height:S,x:i("x",53)-x/2,y:p-S,z:500});u.add(P);var w=0,R=d.createTransform();R.duration=3e3,R.scale(2,2);var A=d.createTransform();A.duration=3e3,A.scale(2,2),c.addEventListener("onload",function(){m=c.screen.width/c.size.width,c.registerForMultiTouch(),a(),v.transform(A),h.transform(R),a(),u.add(h),c.start()});var E="http://bonozo.com:8080/knp/knp_assign_quests.php?assign_by_uid="+r.Record[0].UID+"&assign_to_uid="+r.Record[0].UID+"&quest_ids="+t+"&message=Single Player Game&num_of_hours=3&status=SINGLE_PLAYER_GAME",q="",U=0,k=require("/ui/common/Functions/function");return k.requestServer({success:function(){q=JSON.parse(this.responseText),U=q.Record.length,void 0!=q.Record&&(_assign_quest_id=q.Record[0].ASSIGN_QUEST_ID)},method:"GET",contentType:"text/xml",url:E}),c.addEventListener("click",function(){s?alert("You have already played this quest!\nPress back button"):(E="http://bonozo.com:8080/knp/knp_set_quest_status.php?game_status=COMPLETE&quest_status="+e+"&assign_quest_id="+_assign_quest_id+"&quest_id="+t+"&uid="+r.Record[0].UID+"&friend_uid="+r.Record[0].UID,k.requestServer({success:function(){if(q=JSON.parse(this.responseText),void 0!=q.Record&&"Updated!"==q.Record[0].Message){Ti.App.fireEvent("game_played",{status:"complete"});var e=0,t="",r="";for(var i in q.Record[0]){if(q.Record[0].hasOwnProperty(i)){{i+" -> "+q.Record[0][i]}1==e?t=q.Record[0][i]:e>1&&(r+="\n"+i+"("+q.Record[0][i]+")")}e++}var n=Titanium.UI.createAlertDialog({title:"You have completed "+t+".",message:"Rewards earned:"+r,buttonNames:["OK"]});n.show(),n.addEventListener("click",function(){o.close()})}Ti.App.fireEvent("update_xp",{clicked_item:"StatusScreen"})},method:"GET",contentType:"text/xml",url:E}),s=!0)}),o.addEventListener("open",function(){var e=o.activity;e.addEventListener("resume",function(){w=setInterval(function(){a(),v.transform(A),h.transform(R)},3e3)}),e.addEventListener("pause",function(){clearInterval(w),w=null}),e.addEventListener("destroy",function(){clearInterval(w),w=null})}),o.add(c),o.open({fullscreen:!0,navBarHidden:!0}),o}module.exports=ArcheryGamePlay;