function SonnetQuestPlay(e,t,i,n,o){function a(){d++}function r(e,t){for(var i=0;i<t.length;i++)if(t[i].match(e))return i;return-1}var s=!1,d=0,c=(Titanium.Platform.displayCaps.platformWidth,Ti.UI.createWindow({orientation:Ti.UI.PORTRAIT,navBarHidden:!0,fullscreen:!0}));c.orientationModes=[Ti.UI.PORTRAIT,Ti.UI.UPSIDE_PORTRAIT];var l=Titanium.UI.createView({width:"100%",height:"100%",backgroundImage:"/assets/inventoryBackground.png"});c.add(l);var u=Ti.UI.createImageView({image:"/assets/inventoryBackground.png",width:"100%",height:"100%"});l.add(u),a(),u.addEventListener("load",function(){a()});var p=Titanium.UI.createImageView({image:"/assets/overlayPlayerInfoCroped.png",height:"6.4%",width:"100%",bottom:"94.6%"});l.add(p);var g=Titanium.UI.createLabel({text:"SONNET GAME",top:"0",height:"3.1%",left:"3%",textAlign:"left",color:"#5afd9b",font:{fontWeight:"bold",fontSize:"12dip"}});l.add(g);var h=Titanium.UI.createLabel({text:"CREATE SONNET",top:"0",height:"3.1%",right:"8%",textAlign:"left",color:"#5afd9b",font:{fontWeight:"bold",fontSize:"12dip"}});l.add(h);var m=Titanium.UI.createImageView({image:"/assets/iconReturn.png",height:"8%",width:"11.6%",top:"1%",right:"3%"});l.add(m),m.addEventListener("click",function(){c.close()});var f=Titanium.UI.createLabel({text:"CHALLENGER: FRIENDNAME03",top:"9%",left:"35%",textAlign:"left",color:"#5afd9b",font:{fontSize:"9dip"}});l.add(f);var T=Titanium.UI.createLabel({text:"TIME TO COMPLETE: 01:24:00",top:"27%",color:"#5afd9b",font:{fontSize:"9dip"}});l.add(T);var I=Titanium.UI.createImageView({backgroundImage:"/assets/games/sonnet/title_bg.png",height:"10%",width:"100%",top:"15%"});l.add(I);var v=Ti.UI.createView({backgroundColor:"#72AE94",borderColor:"#376b54",borderWidth:1,borderRadius:5,height:"12%",top:"14%",left:"3%",width:"72%"}),E=Titanium.UI.createLabel({text:"WRITE A SONNET ABOUT:",top:"1%",left:"2%",textAlign:"left",color:"#5afd9b",font:{fontSize:"10dip"}});v.add(E);var _=Titanium.UI.createLabel({text:"THE BLACK PLAGUE",font:{fontWeight:"bold",fontSize:"13dip"}});v.add(_),l.add(v);var R=Ti.UI.createImageView({image:"/assets/female_icon.png",width:"28%",right:"1%",height:"15%",top:"11%"});l.add(R);var b=Titanium.UI.createView({backgroundImage:"/assets/games/sonnet/desc_bg.png",height:"16%",width:"100%",top:"30%"}),A=Titanium.UI.createImageView({backgroundImage:"/assets/iconSonnet.png",height:"25%",width:"10%",top:"1%",left:"1%"});b.add(A);var _=Titanium.UI.createLabel({text:"",top:"1%",left:"10%",color:"#5afd9b",font:{fontSize:"13dip"}});b.add(_),l.add(b);var S=Titanium.UI.createImageView({image:"/assets/overlayNameScroll.png",height:"25%",width:"100%",top:"41%"});l.add(S);var U=Ti.UI.createLabel({text:"RULE: WORD MUST BE ATLEAT 5 LETTERS",color:"#5AFD9B",font:{fontSize:"10"},top:"65%"});l.add(U);var w=48,x=Ti.UI.createView({top:"68%",height:"7%",width:"50%"});l.add(x);var L=Ti.UI.createImageView({image:"/assets/iconControlArrowLeft.png",right:"8%",width:"20%",height:"100%"});x.add(L),L.addEventListener("click",function(){N.text=++w});var y=Ti.UI.createImageView({image:"/assets/iconControlArrowRight.png",left:"10%",width:"20%",height:"100%"});x.add(y),y.addEventListener("click",function(){N.text=w>1?--w:w});var N=Ti.UI.createLabel({text:"SWAP RULE",color:"#5AFD9B",font:{fontSize:"12dip"},left:"25%",textAlign:"center"});x.add(N);var P=(Ti.UI.createLabel({text:"HOURS",color:"#5AFD9B",font:{fontSize:"12dip"},left:"40%",textAlign:"center"}),Ti.UI.createLabel({text:"LETTERS FOR THIS WORD:",color:"#5AFD9B",font:{fontSize:"10dip"},textAlign:"center",top:"72%"}),Ti.UI.createView({top:"70%",height:"30%",width:"98%",left:"4%"}));l.add(P);var k=Titanium.UI.createTextField({left:"25%",top:"45%",width:"70%",hintText:"Write a Sonnet",height:"15%",paddingLeft:"3",color:"#0B0909",backgroundColor:"transparent"});l.add(k);var C=Titanium.UI.createButton({title:"UNDO WORD",backgroundImage:"/assets/button_smallLong_UP.png",left:"5%",top:"60%",color:"#0B0909",font:{fontSize:"11"},height:"6%"});l.add(C);var M=Titanium.UI.createButton({title:"SUBMIT WORD",backgroundImage:"/assets/button_smallLong_UP.png",right:"5%",top:"60%",color:"#0B0909",font:{fontSize:"11"},height:"6%"});l.add(M);var D=["PLAGUE","KNIGHT","PRINCESS","GAMES","SONNET"],z=0,G=[];M.addEventListener("click",function(){var a=k.value;if(a.length<"5")alert("Word is too small.");else{var d=r(a,D);if("-1"==d){if(alert("You have entered a wrong word!"),k.value="",z++,"3"==z)if(s)alert("You have already played this quest!\nPress back button");else{var l=require("ui/common/Functions/function");_url="http://bonozo.com:8080/knp/knp_set_quest_status.php?game_status=LOSE&quest_status="+e+"&assign_quest_id="+o.ASSIGN_QUEST_ID+"&quest_id="+t+"&uid="+i.Record[0].UID+"&friend_uid="+n,l.requestServer({success:function(){if(items_json=JSON.parse(this.responseText),void 0!=items_json.Record&&"Updated!"==items_json.Record[0].Message){var e=Titanium.UI.createAlertDialog({title:"Sorry!",message:"You lost the game!",buttonNames:["OK"]});e.show(),e.addEventListener("click",function(){c.close()})}Ti.App.fireEvent("update_xp",{clicked_item:"StatusScreen"})},method:"GET",contentType:"text/xml",url:_url}),s=!0}}else{var u=r(a,G);if("0"==u&&(alert("You have already enter this word!"),k.value=""),"-1"==u&&(G.push(a),k.value="",_.text+=" "+a,G.length>="3"))if(s)alert("You have already played this quest!\nPress back button");else{var l=require("ui/common/Functions/function");_url="http://bonozo.com:8080/knp/knp_set_quest_status.php?game_status=COMPLETE&quest_status="+e+"&assign_quest_id="+o.ASSIGN_QUEST_ID+"&quest_id="+t+"&uid="+i.Record[0].UID+"&friend_uid="+n,l.requestServer({success:function(){if(items_json=JSON.parse(this.responseText),void 0!=items_json.Record&&"Updated!"==items_json.Record[0].Message){Ti.App.fireEvent("game_played",{status:"complete"});var e=0,t="",i="";for(var n in items_json.Record[0]){if(items_json.Record[0].hasOwnProperty(n)){{n+" -> "+items_json.Record[0][n]}1==e?t=items_json.Record[0][n]:e>1&&(i+="\n"+n+"("+items_json.Record[0][n]+")")}e++}var o=Titanium.UI.createAlertDialog({title:"You have completed "+t+".",message:"Rewards earned:"+i,buttonNames:["OK"]});o.show(),o.addEventListener("click",function(){c.close()})}Ti.App.fireEvent("update_xp",{clicked_item:"StatusScreen"})},method:"GET",contentType:"text/xml",url:_url}),s=!0}}}});for(var O,F=0,q=2,V=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],W=0;W<V.length;W++)W%8==0&&(F+=26,q=2),O=Titanium.UI.createButton({title:V[W],backgroundImage:"/assets/button_smallLong_UP.png",left:q+"%",top:F,value:V[W],color:"#0B0909",font:{fontSize:"16"},width:"10%",height:"25%"}),P.add(O),O.addEventListener("click",function(e){k.value+=e.source.value}),q+=11;return c}module.exports=SonnetQuestPlay;