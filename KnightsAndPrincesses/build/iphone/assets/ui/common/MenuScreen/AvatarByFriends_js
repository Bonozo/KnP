function AvatarByFriends(e,t,r,i){function a(e,t){return Math.floor(Math.random()*(t-e+1))+e}var n=a(1,9e4),o="",d=Titanium.Platform.displayCaps.platformWidth,s="",c=0,l="",d=Titanium.Platform.displayCaps.platformWidth,u=(Titanium.Platform.displayCaps.platformHeight,Ti.UI.createView()),p=[],f=require("/ui/common/drawings/AvatarThumbnail"),m=require("/ui/common/Functions/function");m.requestServer({success:function(){if(s=JSON.parse(this.responseText),c=s.Record.length,void 0!=s.Record){for(var a=.189*d,m="",h="",g=0;g<s.Record.length;g++){o=s.Record[g].GENDER,m="/assets/freind_list"+("f"==o?"_female":"_male")+".png",h="f"==o?"female_icon":"male_icon",r[g]=Ti.UI.createTableViewRow({height:a,uid:s.Record[g].UID,className:"FriendFriendlist",genes:s.Record[g].GENDER,index:g,backgroundImage:m}),r[g].addEventListener("click",function(t){Ti.App.addEventListener("message_read",function(){backgroundImage="/assets/freind_list"+("f"==t.row.genes?"_female":"_male")+".png"});var r=require("/ui/common/MenuScreen/FreindInfo"),i=new r(e,s.Record[t.row.index]);i.open(),i.addEventListener("open",function(){})}),f({width:"12%",height:"85.5%",top:"4.8px",right:"3%"},s.Record[g].USER_APPEARANCE,s.Record[g].GENDER,g,function(e,t){null!=n&&(p[t]=e,r[t].add(p[t]))});var v=(Titanium.UI.createImageView({image:"/assets/"+h+".png",width:"15%",top:"2px",right:"2%"}),Ti.UI.createLabel({text:"LVL "+s.Record[g].LEVEL,font:{fontSize:"12dip"},color:"#b3fad0",right:"17%",top:"5%"}));r[g].add(v);var T=Titanium.UI.createImageView({image:"/assets/miGoldWide_up.png",visible:!0,right:"30%",width:"11%",height:"32%"});r[g].add(T);var _=Ti.UI.createLabel({text:s.Record[g].NUM_OF_GOLDS,font:{fontSize:"14dip"},color:"#FFCC00",right:"17%"});r[g].add(_);var I=Ti.UI.createLabel({text:"ONLINE",font:{fontSize:"12dip"},color:"#b3fad0",bottom:"5%",right:"17%"});r[g].add(I);var R=Ti.UI.createLabel({text:s.Record[g].NAME,font:{fontWeight:"bold",fontSize:"18dip"},color:"#b3fad0",left:"8px",top:"20%",width:"45%"});r[g].add(R);var x=Ti.UI.createLabel({text:s.Record[g].STATUS_MESSAGE,font:{fontSize:"12dip"},top:"55%",color:"#b3fad0",left:"8px",width:"45%"});r[g].add(x),t.push(r[g])}if(l=Ti.UI.createTableView({backgroundColor:"transparent",separatorColor:"transparent",zIndex:300,data:t,width:"100%",height:"66%",top:"2%"}),s.Record.length>0)u.add(l),i(u);else{var E=Ti.UI.createLabel({text:"You have no friends!",font:{fontWeight:"bold",fontSize:"18dip"},color:"#b3fad0"});u.add(E),i(u)}}},method:"GET",contentType:"text/xml",url:"http://bonozo.com:8080/knp/friends_list.php?uid="+e.Record[0].UID}),Ti.App.addEventListener("avatar_table_changed",function(e){"AvatarByFriends"==e.release_table&&(n=null)})}module.exports=AvatarByFriends;