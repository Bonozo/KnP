function KnPStore(e){function t(t){var i="http://bonozo.com:8080/knp/get_golds.php?uid="+e.Record[0].UID;l.requestServer({success:function(){items_json=JSON.parse(this.responseText),void 0!=items_json.Record&&t(items_json.Record[0])},method:"GET",contentType:"text/xml",url:i})}var i=Ti.UI.createWindow({backgroundImage:"/assets/inventoryBackground.png",navBarHidden:!0,fullscreen:!0,zIndex:200});i.orientationModes=[Ti.UI.PORTRAIT,Ti.UI.UPSIDE_PORTRAIT];var n=Ti.UI.createImageView({image:"/assets/overlayPlayerInfoCroped.png",height:"6.4%",width:"100%",bottom:"94.6%"});i.add(n);var a=Titanium.Platform.displayCaps.platformWidth,o=(Titanium.Platform.displayCaps.platformHeight,Ti.UI.createView(),Titanium.UI.createView({backgroundColor:"#FFFFFF",borderRadius:10,borderColor:"#333333",borderWidth:"5dip",visible:!1,height:"8%",width:a/2,zIndex:700})),r=Ti.UI.createActivityIndicator({color:"#333333",font:{fontSize:"14dip",fontWeight:"bold"},message:"Loading...",style:"iPhone OS"===Ti.Platform.name?Ti.UI.iPhone.ActivityIndicatorStyle.DARK:Ti.UI.ActivityIndicatorStyle.DARK,height:"100%",width:"100%"});o.add(r),i.add(o),r.show(),o.visible=!0;var s=Titanium.UI.createLabel({text:"Store",top:"0.8%",height:"3.1%",left:"3%",textAlign:"left",color:"#5afd9b",font:{fontWeight:"bold",fontSize:"14dip"}});i.add(s);var d=Titanium.UI.createLabel({text:"Back",top:"0.8%",height:"3.1%",right:"15.6%",textAlign:"right",color:"#5afd9b",font:{fontSize:"12dip"}});i.add(d);var c=Ti.UI.createImageView({image:"/assets/iconReturn.png",height:"8%",width:"11.6%",top:"1%",right:"3%"});i.add(c),c.addEventListener("click",function(){i.close()});var l=require("/ui/common/Functions/function"),a=Titanium.Platform.displayCaps.platformWidth,u=[];t(function(t){var n="http://bonozo.com:8080/knp/get_store_inventories.php";l.requestServer({success:function(){items_json=JSON.parse(this.responseText);for(var n=.136*a,s=0;s<items_json.Record.length;s++){var d=Ti.UI.createTableViewRow({height:n,className:"knp_inventory_store",zIndex:500}),c=Ti.UI.createImageView({image:"/assets/inv_128/"+items_json.Record[s].IMAGE+".png",width:"13%",top:"5px",left:"5px"});d.add(c);var l=parseInt(items_json.Record[s].REQ_GOLD),p=(parseInt(t.TOTAL_UNIT),Ti.UI.createLabel({text:items_json.Record[s].NAME,font:{fontSize:"18dip",fontWeight:"bold"},color:"#5afd9b",left:"15%",width:"45%"}));d.add(p);var h,g="";e.Record[0].NUM_OF_GOLDS*e.Record[0].LEVEL<l?(h="/assets/itemLock.png",g="Buy"):(h="",g="Buy");var m=Ti.UI.createImageView({image:h,width:"12%",top:"5px",left:"65%"});d.add(m);var f=Titanium.UI.createButton({title:g,color:"#761f56",width:"20%",inventory:items_json.Record[s],font:{fontSize:"11dip"},inv_id:items_json.Record[s].INVENTORY_ID,req_gold:items_json.Record[s].REQ_GOLD,left:"80%",backgroundImage:"/assets/button_small_UP.png"});d.add(f),f.addEventListener("click",function(t){var i=require("/ui/common/MenuScreen/PurchaseInventory"),n=new i(e,t.source.inventory);n.open({modal:!0})});var T=Ti.UI.createLabel({text:items_json.Record[s].REQ_GOLD,left:"68%",font:{fontSize:"14dip",fontWeight:"bold"},color:"#59fe9a"});d.add(T);var I=Ti.UI.createImageView({image:"assets/iconGold.png",left:"60%",width:"5%"});d.add(I),u.push(d)}var v=Ti.UI.createTableView({backgroundColor:"transparent",separatorColor:"#59fe9a",data:u,width:"100%",height:"72.3%",top:"10%"});i.add(v),r.hide(),o.visible=!1},method:"GET",contentType:"text/xml",url:n})});var p=(Ti.UI.createButton({color:"#761f56",backgroundImage:"/assets/button_smallLong_UP.png",font:{fontSize:"9dip"},title:"SPELLS",width:"16%",height:"4.5%",right:"2.7%",bottom:"10.3%"}),Ti.UI.createButton({color:"#761f56",backgroundImage:"/assets/button_smallLong_UP.png",font:{fontSize:"9dip"},title:"ARMOR",width:"16%",height:"4.5%",right:"20.8%",bottom:"10.3%"}),Ti.UI.createButton({color:"#761f56",backgroundImage:"/assets/button_smallLong_UP.png",font:{fontSize:"9dip"},title:"SUPPLIES",width:"16%",height:"4.5%",right:"37.9%",bottom:"10.3%"}),Ti.UI.createButton({color:"#761f56",backgroundImage:"/assets/button_smallLong_UP.png",font:{fontSize:"9dip"},title:"GIFTS",width:"16%",height:"4.5%",right:"55%",bottom:"10.3%"}),Ti.UI.createLabel({text:"SORT",color:"#58fe9b",right:"73.1%",bottom:"10.3%",textAlign:"right",font:{fontSize:"14dip"}}),Ti.UI.createButton({color:"#761f56",backgroundColor:"#9c5b00",color:"#dcbf21",title:"Get More Gold",height:"4.5%",width:"35%",right:"5%",bottom:"10%",borderColor:"#dcbf21",borderRadius:5,borderWidth:1}));i.add(p),Ti.App.addEventListener("update_userjsoninfo",function(t){var i=require("/ui/common/Functions/function");i.requestServer({success:function(){e=JSON.parse(this.responseText)},method:"GET",contentType:"text/xml",url:"http://bonozo.com:8080/knp/get_avatar_info.php?uid="+t.UID})}),p.addEventListener("click",function(){var t=require("ui/common/MenuScreen/GoldPurchase"),i=new t(e);return i.open(),void 0});var l=require("/ui/common/Functions/function");return l.requestServer({success:function(){var e=JSON.parse(this.responseText),t=require("ui/common/menus/Footer"),n=new t(e);i.add(n)},method:"GET",contentType:"text/xml",url:"http://bonozo.com:8080/knp/get_avatar_info.php?uid="+e.Record[0].UID}),i}module.exports=KnPStore;