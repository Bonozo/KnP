function GiftNotifications(e){function t(){var e=Ti.UI.createView({backgroundColor:"blue",width:"100%",height:"100%"}),t=Ti.UI.createLabel({text:"aLabel",color:"#000000",font:{fontSize:"12dp"},textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER});return e.add(t),e}var i=Ti.UI.createWindow({orientation:Ti.UI.PORTRAIT,navBarHidden:!0,fullscreen:!0});i.orientationModes=[Ti.UI.PORTRAIT,Ti.UI.UPSIDE_PORTRAIT];var n=Titanium.Platform.displayCaps.platformWidth,o=Titanium.UI.createView({width:"100%",height:"100%",backgroundImage:"/assets/inventoryBackground.png"});i.add(o);var a=e.Record[0].GENDER,r=require("/ui/common/drawings/Avatar"),d=require("/ui/common/drawings/Settings"),s=new d,c={};if(c.gender=a,c.main_view={width:1.5*s.avatar_width,height:1.5*s.avatar_height},void 0!=e.Record[0].USER_APPEARANCE&&""!=e.Record[0].USER_APPEARANCE&&"f"==e.Record[0].GENDER){c.appearence={hair_back:"/assets/princess/"+e.Record[0].USER_APPEARANCE[0].IMAGE+"-back.png",face:"/assets/princess/"+e.Record[0].USER_APPEARANCE[1].IMAGE+".png",dress:"/assets/princess/"+e.Record[0].USER_APPEARANCE[3].IMAGE+".png",hair_front:"/assets/princess/"+e.Record[0].USER_APPEARANCE[0].IMAGE+"-front.png",jewelery:"/assets/princess/"+e.Record[0].USER_APPEARANCE[2].IMAGE+".png"};var l=new r(c);o.add(l)}else if(void 0!=e.Record[0].USER_APPEARANCE&&""!=e.Record[0].USER_APPEARANCE&&"m"==e.Record[0].GENDER){c.appearence={dress:"/assets/knight/"+e.Record[0].USER_APPEARANCE[2].IMAGE+".png",helmet:"/assets/knight/"+e.Record[0].USER_APPEARANCE[4].IMAGE+".png",shield:"/assets/knight/"+e.Record[0].USER_APPEARANCE[5].IMAGE+".png",hair_back:"/assets/knight/"+e.Record[0].USER_APPEARANCE[0].IMAGE+"-back.png",face:"/assets/knight/"+e.Record[0].USER_APPEARANCE[1].IMAGE+".png",hair_front:"/assets/knight/"+e.Record[0].USER_APPEARANCE[0].IMAGE+"-front.png",weapon:"/assets/knight/"+e.Record[0].USER_APPEARANCE[3].IMAGE+".png"};var l=new r(c);o.add(l)}else if("f"==e.Record[0].GENDER){var u=require("/ui/common/drawings/Defaults");new u("f",function(e){c.appearence={hair_back:"/assets/princess/"+e.hair.IMAGE+"-back.png",face:"/assets/princess/"+e.face.IMAGE+".png",dress:"/assets/princess/"+e.dress.IMAGE+".png",hair_front:"/assets/princess/"+e.hair.IMAGE+"-front.png",jewelery:"/assets/princess/"+e.jwelery.IMAGE+".png"};var t=new r(c);o.add(t)})}else{var u=require("/ui/common/drawings/Defaults");new u("m",function(e){c.appearence={dress:"/assets/knight/"+e.dress.IMAGE+".png",helmet:"/assets/knight/"+e.helmet.IMAGE+".png",shield:"/assets/knight/"+e.shield.IMAGE+".png",hair_back:"/assets/knight/"+e.hair.IMAGE+"-back.png",face:"/assets/knight/"+e.face.IMAGE+".png",hair_front:"/assets/knight/"+e.hair.IMAGE+"-front.png",weapon:"/assets/knight/"+e.weapons.IMAGE+".png"};var t=new r(c);o.add(t)})}var p=Titanium.UI.createImageView({image:"/assets/overlayPlayerInfoCroped.png",height:"6.4%",width:"100%",bottom:"94.6%"});o.add(p);var f=Titanium.UI.createLabel({text:e.Record[0].NAME,top:"0",height:"3.1%",left:"3%",textAlign:"left",color:"#5afd9b",font:{fontWeight:"bold",fontSize:"12dip"}});o.add(f);var g=Titanium.UI.createLabel({text:"Gift Notifications",top:"0",height:"3.1%",right:"8%",textAlign:"left",color:"#5afd9b",font:{fontWeight:"bold",fontSize:"12dip"}});o.add(g);var m=Titanium.UI.createImageView({image:"/assets/iconReturn.png",height:"8%",width:"11.6%",zIndex:600,top:"1%",right:"3%"});o.add(m),m.addEventListener("click",function(){i.close()});var h=[],n=(Titanium.Platform.displayCaps.platformHeight,Titanium.Platform.displayCaps.platformWidth),T=require("/ui/common/Functions/function"),h=[],n=(Titanium.Platform.displayCaps.platformHeight,Titanium.Platform.displayCaps.platformWidth),T=require("/ui/common/Functions/function"),I="";return T.requestServer({success:function(){if(I=JSON.parse(this.responseText),items_length=I.Record.length,void 0!=I.Record){var e=.189*n;Ti.App.fireEvent("gift_Notification",{count:"0"});for(var i=0;i<I.Record.length;i++){{t()}if("UNSEEN"==I.Record[i].VIEWED)var a=Ti.UI.createTableViewRow({className:"gift_notification_unseen",height:e,uid:I.Record[i].INV_TRANS_ID,index:i,backgroundImage:"/assets/overlayItemList_highlight.png",zIndex:10});else var a=Ti.UI.createTableViewRow({className:"gift_notification_seen",height:e,uid:I.Record[i].INV_TRANS_ID,index:i,backgroundImage:"/assets/overlayItemList.png",zIndex:10});a.addEventListener("longpress",function(e){Titanium.Media.vibrate();var t=require("/ui/common/MenuScreen/RemoveNotification"),i=new t(I.Record[e.index].INV_TRANS_ID,e.index);i.open({modal:!0})});var r=Ti.UI.createLabel({text:I.Record[i].SENDER_NAME+" sent you a "+I.Record[i].GIFT_NAME,font:{fontSize:"20dip"},color:"#b3fad0",left:"8%",top:"10%"});a.add(r);var d=(Ti.UI.createLabel({text:" sent you a "+I.Record[i].GIFT_NAME,font:{fontWeight:"bold",fontSize:"16dip"},color:"#b3fad0",left:"31%",top:"14.5%"}),Ti.UI.createLabel({text:"at "+I.Record[i].DATETIME,font:{fontSize:"15dip"},color:"#b3fad0",left:"14%",bottom:"10%"}));a.add(d),h.push(a)}tableview=Ti.UI.createTableView({backgroundColor:"transparent",separatorColor:"transparent",data:h,width:"100%",height:"90%",top:"10%"}),o.add(tableview)}},method:"GET",contentType:"text/xml",url:"http://bonozo.com:8080/knp/get_gift_notification.php?uid="+e.Record[0].UID}),Ti.App.addEventListener("remove_gift_notification",function(e){tableview.deleteRow(e.index),alert(e.message)}),i}module.exports=GiftNotifications;