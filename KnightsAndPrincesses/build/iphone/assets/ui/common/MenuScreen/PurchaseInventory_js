function PurchaseInventory(e,t){function i(e,t){return"x"==e?n*t/100:"y"==e?o*t/100:void 0}var n=Titanium.Platform.displayCaps.platformWidth,o=Titanium.Platform.displayCaps.platformHeight,a=Ti.UI.createWindow({backgroundImage:"/assets/itemWindow_001.png",opacity:"0.7",width:"90%",height:"25%",left:"5%",top:"10%",zIndex:1,navBarHidden:!0,fullscreen:!0});a.orientationModes=[Ti.UI.PORTRAIT,Ti.UI.UPSIDE_PORTRAIT];var r=Ti.UI.createImageView({image:"/assets/inv_128/"+t.IMAGE+".png",width:i("y",10),height:i("y",10),top:"5%",left:"3%"});a.add(r);var s=Titanium.UI.createLabel({text:t.NAME,top:"5%",left:i("y",13),textAlign:"left",color:"#5afd9b",font:{fontWeight:"bold",fontSize:"16dip"}});a.add(s);var d=Titanium.UI.createLabel({text:"Req. Gold unit(s) : "+t.REQ_GOLD,top:"18%",left:i("y",13),textAlign:"left",color:"#5afd9b",font:{fontSize:"14dip"}});a.add(d);var c=Titanium.UI.createLabel({text:"Max. purchase unit(s): "+parseInt(e.Record[0].NUM_OF_GOLDS/t.REQ_GOLD),top:"30%",left:i("y",13),textAlign:"left",color:"#5afd9b",font:{fontSize:"14dip"}});a.add(c);var l=1,u=parseInt(e.Record[0].NUM_OF_GOLDS/t.REQ_GOLD);if(1>u){var p=Ti.UI.createLabel({text:"You does not have sufficient gold to purchase "+t.NAME+".\nPress unlock to get more golds.",color:"#5afd9b",font:{fontSize:"10dip"},top:"45%",textAlign:"center"});a.add(p);var h=Titanium.UI.createButton({color:"#761f56",backgroundImage:"/assets/button_small_UP.png",width:"25%",height:"18%",title:"Unlock",font:{fontSize:"14dip",fontWeight:"bold"},right:"10%",bottom:"5%"});return a.add(h),h.addEventListener("click",function(){var t=require("/ui/common/MenuScreen/GoldPurchase"),i=new t(e);i.open(),a.close()}),a}var g=Ti.UI.createView({top:"50%",height:"22%",width:"40%"});a.add(g);var m=Ti.UI.createImageView({image:"/assets/iconControlArrowLeft.png",right:0,height:"100%"});g.add(m),m.addEventListener("click",function(){T.text=u>l?++l:l});var f=Ti.UI.createImageView({image:"/assets/iconControlArrowRight.png",left:0,height:"100%"});g.add(f),f.addEventListener("click",function(){T.text=l>1?--l:l});var T=Ti.UI.createLabel({text:l,color:"#5AFD9B",font:{fontSize:"12dip",fontWeight:"bold"},textAlign:"center"});g.add(T);var I=Titanium.UI.createButton({color:"#761f56",backgroundImage:"/assets/button_small_UP.png",width:"25%",height:"18%",title:"Cancel",font:{fontSize:"16dip",fontWeight:"bold"},left:"10%",bottom:"5%"});a.add(I),I.addEventListener("click",function(){a.close()});var v=Titanium.UI.createButton({color:"#761f56",backgroundImage:"/assets/button_small_UP.png",width:"25%",height:"18%",title:"Confirm",font:{fontSize:"14dip",fontWeight:"bold"},right:"10%",bottom:"5%"});a.add(v),v.addEventListener("click",function(){var i="http://bonozo.com:8080/knp/purchase_inventory.php?uid="+e.Record[0].UID+"&inv_id="+t.INVENTORY_ID+"&req_golds="+parseInt(t.REQ_GOLD*parseInt(T.text))+"&units="+T.text,n=require("/ui/common/Functions/function");n.requestServer({success:function(){items_json=JSON.parse(this.responseText),void 0!=items_json.Record&&(alert(items_json.Record.Message),a.close(),Ti.App.fireEvent("update_footer",{clicked_item:"KnPStore"}),Ti.App.fireEvent("update_userjsoninfo",{UID:e.Record[0].UID}))},method:"GET",contentType:"text/xml",url:i})});var _=Titanium.UI.createImageView({image:"/assets/iconReturn.png",width:"11.6%",top:"0%",right:"0%",zIndex:2});return a.add(_),_.addEventListener("click",function(){a.close()}),a}module.exports=PurchaseInventory;