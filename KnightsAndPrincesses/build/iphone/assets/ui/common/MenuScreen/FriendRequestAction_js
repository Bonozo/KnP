function FriendRequestAction(e,t){function i(e,t){return"x"==e?a*t/100:"y"==e?r*t/100:void 0}var n=Ti.Platform.osname,o=require("/ui/common/drawings/AvatarThumbnail"),a=Titanium.Platform.displayCaps.platformWidth,r=Titanium.Platform.displayCaps.platformHeight,d=Ti.UI.createWindow({orientation:Ti.UI.PORTRAIT,navBarHidden:!0,fullscreen:!0});d.orientationModes=[Ti.UI.PORTRAIT,Ti.UI.UPSIDE_PORTRAIT];var s=Titanium.UI.createView({backgroundColor:"#FFFFFF",borderRadius:10,borderColor:"#333333",borderWidth:"5dip",visible:!1,height:"8%",width:a/2,left:i("x",50)-a/4,top:i("x",42),zIndex:700}),c=Ti.UI.createActivityIndicator({color:"#333333",font:{fontSize:"14dip",fontWeight:"bold"},message:"Loading...",style:"iPhone OS"===Ti.Platform.name?Ti.UI.iPhone.ActivityIndicatorStyle.DARK:Ti.UI.ActivityIndicatorStyle.DARK,height:"100%",width:"100%"});s.add(c),d.add(s),function(){c.show(),s.visible=!0,c.message="Loading..."}();var l,u=Titanium.UI.createView({width:"100%",height:"100%",backgroundImage:"/assets/inventoryBackground.png"});d.add(u);var p=Titanium.UI.createView({backgroundImage:"/assets/footerSlim_001.png",height:"8%",width:"100%",top:"0%"});u.add(p);var f=Titanium.UI.createLabel({text:e.Record[0].NAME,left:"3%",textAlign:"left",color:"#5afd9b",font:{fontWeight:"bold",fontSize:"16dip"},zIndex:100});p.add(f);var g=Titanium.UI.createLabel({text:"Friend Request",right:"15.6%",textAlign:"right",color:"#5afd9b",font:{fontSize:"14dip"},zIndex:100});p.add(g);var m=Ti.UI.createImageView({image:"/assets/iconReturn.png",width:"11.6%",top:"1%",right:"3%"});u.add(m),m.addEventListener("click",function(){d.close()});var h=Ti.UI.createView({width:"100%",top:"9%",height:"16%"}),T=(Titanium.UI.createImageView({backgroundImage:"/assets/rowview_bg.png",height:"96%",width:"100%"}),Titanium.UI.createLabel({top:"0",left:"2%",textAlign:"right",color:"#5afd9b",font:{fontSize:"18dip",fontWeight:"bold"}}));h.add(T);var I=Titanium.UI.createLabel({text:"",left:"2%",textAlign:"right",color:"#5afd9b",font:{fontSize:"16dip"}});h.add(I);var v=Titanium.UI.createLabel({bottom:"0",left:"10%",textAlign:"right",color:"#5afd9b",font:{fontSize:"14dip"}});h.add(v);var E=Ti.UI.createImageView({image:"/assets/iconFriends.png",width:"7.5%",height:"30%",bottom:0,left:"2%"});h.add(E);var _,b=0,R="http://bonozo.com:8080/knp/get_avatar_info.php?uid="+t.UID,A=require("/ui/common/Functions/function");A.requestServer({success:function(){items_json=JSON.parse(this.responseText),void 0!=items_json.Record&&""!=items_json.Record.Message&&(o({width:"100%",height:"100%",top:"0dip",right:"0%"},items_json.Record[0].USER_APPEARANCE,items_json.Record[0].GENDER,0,function(e){S.add(e)}),T.text=items_json.Record[0].NAME,I.text=items_json.Record[0].STATUS_MESSAGE,l=items_json.Record[0].GENDER,U.text="LVL "+items_json.Record[0].LEVEL,v.text=items_json.Record[0].NUM_OF_FRIENDS+" friend(s)",w.text=items_json.Record[0].NUM_OF_GOLDS,user_id=items_json.Record[0].USER_ID,b++,b>=2&&(c.hide(),s.visible=!1))},method:"GET",contentType:"text/xml",url:R}),_="f"==l?"/assets/female_icon.png":"/assets/male_icon.png";var S=Titanium.UI.createView({right:"0%",width:"20%"});h.add(S);var U=Titanium.UI.createLabel({top:"0",right:"22%",textAlign:"right",color:"#5afd9b",font:{fontSize:"14dip"}});h.add(U);var w=Titanium.UI.createLabel({right:"30%",textAlign:"right",color:"#5afd9b",font:{fontSize:"14dip"}}),x=Titanium.UI.createImageView({image:"/assets/miGoldWide_up.png",right:"20%",width:"8%",height:"30%"});h.add(x),h.add(w),x.addEventListener("touchstart",function(){x.image="/assets/miGoldWide_down.png"}),x.addEventListener("touchend",function(){x.image="/assets/miGoldWide_up.png"});Titanium.UI.createLabel({text:"ONLINE",bottom:"0%",right:"22%",textAlign:"right",color:"#5afd9b",font:{fontSize:"14dip"}});u.add(h);var L=Titanium.UI.createView({backgroundImage:"/assets/infoBarBG.png",top:"25%",height:"5.5%"});u.add(L);var k=Titanium.UI.createLabel({text:"ASSIGN QUESTS: MAKE THEM WORK FOR IT!",top:"26%",textAlign:"right",color:"#5afd9b",font:{fontSize:"12dip",fontWeight:"bold"},zIndex:100});u.add(k);var N=Ti.UI.createLabel({text:"Selected Quests",color:"#5AFD9B",font:{fontSize:"12dip",fontWeight:"bold"},top:"31%",left:"15%"});u.add(N);var y=0,P=Ti.UI.createLabel({text:y,color:"#5AFD9B",font:{fontSize:"12dip",fontWeight:"bold"},top:"35%",left:"20%"});u.add(P);var z=Ti.UI.createLabel({text:"Time limit (hours)",color:"#5AFD9B",font:{fontSize:"12dip",fontWeight:"bold"},top:"31%",right:"15%"});u.add(z);var M=48,F=Ti.UI.createView({top:"35%",right:"8%",height:"7%",width:"40%"});u.add(F);var D=Ti.UI.createImageView({image:"/assets/iconControlArrowLeft.png",right:0,height:"100%"});F.add(D),D.addEventListener("click",function(){G.text=++M});var C=Ti.UI.createImageView({image:"/assets/iconControlArrowRight.png",left:0,height:"100%"});F.add(C),C.addEventListener("click",function(){G.text=M>1?--M:M});var G=Ti.UI.createLabel({text:M,color:"#5AFD9B",font:{fontSize:"12dip",fontWeight:"bold"},textAlign:"center"});F.add(G);var q=(Ti.UI.createLabel({text:"HOURS",color:"#5AFD9B",font:{fontSize:"12dip"},left:"40%",textAlign:"center"}),1),O=[],V=(Titanium.Platform.displayCaps.platformHeight,Titanium.Platform.displayCaps.platformWidth),B=.15*V,W=[],A=require("/ui/common/Functions/function"),j="http://bonozo.com:8080/knp/get_all_quests.php",Q=[];A.requestServer({success:function(){if(items_json=JSON.parse(this.responseText),void 0!=items_json.Record){for(var e=0;e<items_json.Record.length;e++){var t=Titanium.UI.createTableViewRow({backgroundImage:"/assets/listQuest001_up.png",height:"iphone"===n||"ipad"===n?"37%":B+"px",quest_id:items_json.Record[e].QUEST_ID,backgroundColor:"#0b4129",quest_name:items_json.Record[e].QUEST_NAME,index:e,zIndex:100,selected:!1,touchEnabled:!0});t.addEventListener("click",function(e){1==e.row.selected?(e.row.selected=!1,Q[e.row.index].image="/assets/tradeToggle_no.png",delete W[e.row.index],y--):(e.row.selected=!0,Q[e.row.index].image="/assets/tradeToggle_yes.png",W[e.row.index]=e.row.quest_id,y++),P.text=y}),"Archery"==items_json.Record[e].QUEST_NAME?quest_image="/assets/iconArchery.png":"Sonnet"==items_json.Record[e].QUEST_NAME?quest_image="/assets/iconSonnet.png":"Joust"==items_json.Record[e].QUEST_NAME?quest_image="/assets/iconJoust.png":"Cooking"==items_json.Record[e].QUEST_NAME&&(quest_image="/assets/iconThickBook.png");{Ti.UI.createImageView({image:quest_image,height:B+"px",left:"5%",top:"5%"})}Q[e]=Ti.UI.createImageView({image:"/assets/tradeToggle_no.png",width:"8%",left:"2%",top:"10%"}),t.add(Q[e]);var i=Ti.UI.createLabel({text:"QUEST "+q,color:"#083322",font:{fontSize:"10dip",fontWeight:"bold"},bottom:"8%",left:"2%"});t.add(i);var o=Ti.UI.createLabel({text:items_json.Record[e].QUEST_NAME,color:"#5AFD9B",font:{fontSize:"18dip",fontWeight:"bold"},top:"10%",left:"12%"});t.add(o);var a=Ti.UI.createLabel({text:items_json.Record[e].QUEST_DESCRIPTION,color:"#5AFD9B",font:{fontSize:"14dip",fontWeight:"bold"},right:"0%"});t.add(a);var r=Ti.UI.createLabel({text:"(TAP TO CHOOSE)",color:"#5AFD9B",font:{fontSize:"12dip"},bottom:"3%"});t.add(r),q++,O.push(t)}var d=Ti.UI.createTableView({backgroundColor:"transparent",separatorColor:"transparent",data:O,width:"100%",height:"28%",top:"41%",zIndex:200});u.add(d)}Ti.App.fireEvent("update_xp",{clicked_item:"StatusScreen"}),b++,b>=2&&(c.hide(),s.visible=!1)},method:"GET",contentType:"text/xml",url:j});var H=Titanium.UI.createImageView({left:"10%",top:"70%",width:"80%",height:"12%",image:"/assets/inputButton002_up.png",zIndex:800}),K=Titanium.UI.createTextField({color:"#5AFD9B",top:"70%",width:"70%",hintText:"Your Message",height:"12%",paddingLeft:"3",backgroundColor:"transparent",zIndex:900});u.add(H),u.add(K),("iphone"===n||"ipad"===n)&&(K.addEventListener("focus",function(){H.animate({top:i("y",40),duration:500}),K.animate({top:i("y",40),duration:500})}),K.addEventListener("blur",function(){H.animate({top:"70%",duration:500}),K.animate({top:"70%",duration:500})}));var J=Ti.UI.createButton({color:"#761f56",backgroundGradient:{type:"linear",colors:[" #A42B76","#E39bc8"],startPoint:{x:"50%",y:"100%"},endPoint:{x:"50%",y:"0%"},backFillStart:!1},borderColor:"#A42B76",borderRadius:"2",font:{fontSize:"16dip",fontWeight:"bold"},title:"Accept",height:"6.5%",left:"1%",bottom:"10%",width:"22%"});u.add(J),J.addEventListener("click",function(){var i="http://bonozo.com:8080/knp/friendship_notifications_action.php?uid="+t.UID+"&friend_uid="+e.Record[0].UID+"&action=FRIENDS",n="",o=require("/ui/common/Functions/function");o.requestServer({success:function(){if(n=JSON.parse(this.responseText),void 0!=n.Record){Ti.App.fireEvent("update_friend_list",{activeScreen:"FriendRequestAction"}),Ti.App.fireEvent("request_check",{count:"-1"});var e=Titanium.UI.createAlertDialog({title:"Accept Request!",message:n.Record[0],buttonNames:["OK"]});e.show(),e.addEventListener("click",function(){d.close()})}},method:"GET",contentType:"text/xml",url:i})});var Y=Ti.UI.createButton({color:"#761f56",backgroundGradient:{type:"linear",colors:[" #A42B76","#E39bc8"],startPoint:{x:"50%",y:"100%"},endPoint:{x:"50%",y:"0%"},backFillStart:!1},borderColor:"#A42B76",borderRadius:"2",font:{fontSize:"16dip",fontWeight:"bold"},title:"Decline",height:"6.5%",right:"2.7%",bottom:"10%",width:"22%"});u.add(Y),Y.addEventListener("click",function(){var i="http://bonozo.com:8080/knp/friendship_notifications_action.php?uid="+t.UID+"&friend_uid="+e.Record[0].UID+"&action=DENIED",n="",o=require("/ui/common/Functions/function");o.requestServer({success:function(){if(n=JSON.parse(this.responseText),void 0!=n.Record){Ti.App.fireEvent("update_friend_list",{activeScreen:"FriendRequestAction"}),Ti.App.fireEvent("request_check",{count:"-1"}),K.value="";var e=Titanium.UI.createAlertDialog({title:"Declined Request!",message:"Successfully declined request!",buttonNames:["OK"]});e.show(),e.addEventListener("click",function(){d.close()})}},method:"GET",contentType:"text/xml",url:i})});var X=Ti.UI.createButton({color:"#761f56",backgroundGradient:{type:"linear",colors:[" #A42B76","#E39bc8"],startPoint:{x:"50%",y:"100%"},endPoint:{x:"50%",y:"0%"},backFillStart:!1},font:{fontSize:"16dip",fontWeight:"bold"},borderColor:"#A42B76",borderRadius:"2",title:"Assign Quest",height:"6.5%",bottom:"10%",width:"35%"});u.add(X),X.addEventListener("click",function(){for(var i="",n=0;n<W.length;n++)""!=W[n]&&void 0!=W[n]&&(i=i+","+W[n]);if(""==i)alert("Please Select atleast One Quest.");else{var o=Titanium.UI.createAlertDialog({title:"Click 'Yes' to assign Quest.",message:"Sure?",buttonNames:["Yes","No"],cancel:1});o.addEventListener("click",function(n){if(Titanium.API.info("e = "+JSON.stringify(n)),n.cancel!==n.index&&n.cancel!==!0)switch(n.index){case 0:var o="http://bonozo.com:8080/knp/knp_assign_quests.php?assign_by_uid="+e.Record[0].UID+"&assign_to_uid="+t.UID+"&quest_ids="+i+"&message="+Ti.Network.encodeURIComponent(K.value)+"&num_of_hours="+M+"&status=INCOMPLETE&user_id="+user_id,a=require("/ui/common/Functions/function");a.requestServer({success:function(){if(items_json=JSON.parse(this.responseText),void 0!=items_json.Record&&""!=items_json.Record[0].Message){var e=Titanium.UI.createAlertDialog({title:"Assigned Quest.",message:items_json.Record[0].Message,buttonNames:["OK"]});e.show(),e.addEventListener("click",function(){d.close()}),K.value=""}},method:"GET",contentType:"text/xml",url:o});break;case 1:}}),o.show()}});var Z="http://bonozo.com:8080/knp/get_avatar_info.php?uid="+e.Record[0].UID,A=require("/ui/common/Functions/function");return A.requestServer({success:function(){if(items_json=JSON.parse(this.responseText),void 0!=items_json.Record){var e=require("ui/common/menus/Footer"),t=e(items_json);u.add(t),Ti.App.fireEvent("update_footer",{clicked_item:"FriendRequestAction"})}},method:"GET",contentType:"text/xml",url:Z}),d}module.exports=FriendRequestAction;