function FreindInfo(e,t){function i(e,t){return"x"==e?o*t/100:"y"==e?r*t/100:void 0}function n(){Ti.App.fireEvent("message_read",{})}function a(e,t,i){var n=Ti.UI.createView({zIndex:1}),a=require("/ui/common/drawings/Avatar"),o=require("/ui/common/drawings/Settings"),r=new o,d={};if(d.gender=e.Record[0].GENDER,d.main_view={width:1.5*r.avatar_width,height:1.5*r.avatar_height,right:"0%",top:"8%"},void 0!=e.Record&&""!=e.Record[0].USER_APPEARANCE&&"f"==e.Record[0].GENDER){d.appearence={hair_back:"/assets/princess/"+e.Record[0].USER_APPEARANCE[0].IMAGE+"-back.png",face:"/assets/princess/"+e.Record[0].USER_APPEARANCE[1].IMAGE+".png",dress:"/assets/princess/"+e.Record[0].USER_APPEARANCE[3].IMAGE+".png",hair_front:"/assets/princess/"+e.Record[0].USER_APPEARANCE[0].IMAGE+"-front.png",jewelery:"/assets/princess/"+e.Record[0].USER_APPEARANCE[2].IMAGE+".png"};var s=new a(d);n.add(s),i(n)}else if(void 0!=e.Record&&""!=e.Record[0].USER_APPEARANCE&&"m"==e.Record[0].GENDER){d.appearence={dress:"/assets/knight/"+e.Record[0].USER_APPEARANCE[2].IMAGE+".png",helmet:"/assets/knight/"+e.Record[0].USER_APPEARANCE[4].IMAGE+".png",shield:"/assets/knight/"+e.Record[0].USER_APPEARANCE[5].IMAGE+".png",hair_back:"/assets/knight/"+e.Record[0].USER_APPEARANCE[0].IMAGE+"-back.png",face:"/assets/knight/"+e.Record[0].USER_APPEARANCE[1].IMAGE+".png",hair_front:"/assets/knight/"+e.Record[0].USER_APPEARANCE[0].IMAGE+"-front.png",weapon:"/assets/knight/"+e.Record[0].USER_APPEARANCE[3].IMAGE+".png"};var s=new a(d);n.add(s),i(n)}else if("f"==e.Record[0].GENDER){var c=require("/ui/common/drawings/Defaults");new c("f",function(e){d.appearence={hair_back:"/assets/princess/"+e.hair.IMAGE+"-back.png",face:"/assets/princess/"+e.face.IMAGE+".png",dress:"/assets/princess/"+e.dress.IMAGE+".png",hair_front:"/assets/princess/"+e.hair.IMAGE+"-front.png",jewelery:"/assets/princess/"+e.jwelery.IMAGE+".png"};var t=new a(d);n.add(t),i(n)})}else{var c=require("/ui/common/drawings/Defaults");new c("m",function(e){d.appearence={dress:"/assets/knight/"+e.dress.IMAGE+".png",helmet:"/assets/knight/"+e.helmet.IMAGE+".png",shield:"/assets/knight/"+e.shield.IMAGE+".png",hair_back:"/assets/knight/"+e.hair.IMAGE+"-back.png",face:"/assets/knight/"+e.face.IMAGE+".png",hair_front:"/assets/knight/"+e.hair.IMAGE+"-front.png",weapon:"/assets/knight/"+e.weapons.IMAGE+".png"};var t=new a(d);n.add(t),i(n)})}}var o=Titanium.Platform.displayCaps.platformWidth,r=Titanium.Platform.displayCaps.platformHeight,d=Ti.UI.createWindow({orientation:Ti.UI.PORTRAIT,navBarHidden:!0,fullscreen:!0});d.orientationModes=[Ti.UI.PORTRAIT,Ti.UI.UPSIDE_PORTRAIT];var s=(Ti.UI.createView(),Titanium.UI.createView({backgroundColor:"#FFFFFF",borderRadius:10,borderColor:"#333333",borderWidth:"5dip",visible:!1,left:i("x",50)-o/4,top:i("x",42),height:"8%",width:o/2,zIndex:700})),c=Ti.UI.createActivityIndicator({color:"#333333",font:{fontSize:"14dip",fontWeight:"bold"},message:"Loading...",style:"iPhone OS"===Ti.Platform.name?Ti.UI.iPhone.ActivityIndicatorStyle.DARK:Ti.UI.ActivityIndicatorStyle.DARK,height:"100%",width:"100%"});s.add(c),d.add(s),function(){c.show(),s.visible=!0,c.message="Loading..."}();var o=Titanium.Platform.displayCaps.platformWidth,l=Titanium.UI.createView({width:"100%",height:"100%",backgroundImage:"/assets/inventoryBackground.png"});d.add(l);var u=Titanium.UI.createImageView({image:"/assets/overlayPlayerInfoCroped.png",height:"6.4%",width:"100%",bottom:"94.6%"});l.add(u);var p=Titanium.UI.createLabel({text:e.Record[0].NAME,top:"1.5%",height:"3.5%",left:"3%",textAlign:"left",color:"#5afd9b",font:{fontWeight:"bold",fontSize:"12dip"}});l.add(p);var f=Titanium.UI.createLabel({text:"Back",top:"1.5%",height:"3.5%",right:"15.6%",textAlign:"right",color:"#5afd9b",font:{fontSize:"12dip"}});l.add(f);var m=Titanium.UI.createImageView({image:"/assets/iconReturn.png",width:"11.6%",top:"0.3%",right:"3%",zIndex:500});l.add(m),m.addEventListener("click",function(){d.close()});var g,o=(Titanium.Platform.displayCaps.platformHeight,Titanium.Platform.displayCaps.platformWidth),h=.119*o,T=Ti.UI.createView({width:"55%",top:"37%",left:"0%",zIndex:10,height:h,backgroundColor:"#53e990"}),v=Titanium.UI.createImageView({backgroundImage:"/assets/rowview_bg.png",zIndex:10,height:"96%",width:"100%"});T.add(v);var I=Titanium.UI.createImageView({backgroundImage:"/assets/iconGift.png",height:"96%",left:"0%",zIndex:10,width:"20%"});T.add(I);var p=Titanium.UI.createLabel({text:"GIFT OR TRADE \n (TAP To CHOOSE)",textAlign:"right",zIndex:10,color:"#5afd9b",font:{fontSize:"14dip"}});p.addEventListener("click",function(){c.show(),s.visible=!0;var i=require("ui/common/MenuScreen/GiftFromMessage"),n=new i(e,t.UID);n.open({modal:!0}),n.addEventListener("open",function(){c.hide(),s.visible=!1})}),T.add(p),l.add(T);var E=Ti.UI.createView({width:"55%",top:"44%",zIndex:10,left:"0%",height:h,backgroundColor:"#53e990"}),v=Titanium.UI.createImageView({backgroundImage:"/assets/rowview_bg.png",zIndex:10,height:"96%",width:"100%"});E.add(v);var b=Titanium.UI.createImageView({backgroundImage:"/assets/iconThickBook.png",height:"96%",zIndex:10,left:"0%",width:"20%"});E.add(b);var R=Titanium.UI.createLabel({text:"ASSIGN QUESTS \n (TAP To CHOOSE)",textAlign:"right",zIndex:10,color:"#5afd9b",font:{fontSize:"14dip"}});R.addEventListener("click",function(){var i=require("/ui/common/MenuScreen/FreindAssignQuest"),n=i(e,t.UID);n.open()}),E.add(R),l.add(E);var _,w,U=require("/ui/common/Functions/function");U.requestServer({success:function(){c.hide(),s.visible=!1;var i=JSON.parse(this.responseText);_=i.Record[0].STATUS_MESSAGE+" \n LVL "+i.Record[0].LEVEL;var n=Titanium.UI.createLabel({text:_,top:"10.1%",left:"4%",textAlign:"left",color:"#5afd9b",font:{fontSize:"10dip"}});l.add(n),w=i.Record[0].GENDER,a(i,{},function(e){l.add(e)});var o=Ti.UI.createButton({color:"#761f56",backgroundImage:"/assets/button_small_UP.png",top:"30%",right:"5%",width:"21.5%",height:"5%",title:"Messages",zIndex:510,font:{fontSize:"10dip"}});l.add(o),"NEW_MESSAGE"==t.MESSAGE&&(g=Titanium.UI.createImageView({top:"18.8%",left:"49.5%",image:"/assets/message_alert.png",height:"4%",width:"6%",zIndex:600}),l.add(g)),o.addEventListener("click",function(){c.show(),s.visible=!0;var n=require("/ui/common/MenuScreen/MessageScreen"),a=new n(e,t.UID,w,t.NAME,i);a.open({modal:!0}),a.addEventListener("open",function(){c.hide(),s.visible=!1})});var r=Titanium.UI.createLabel({text:i.Record[0].NUM_OF_GOLDS,top:"15.5%",left:"12.5%",textAlign:"left",color:"#FFCC00",font:{fontWeight:"bold",fontSize:"12dip"}});l.add(r);var d=Titanium.UI.createImageView({image:"/assets/iconGoldMini.png",width:"7%",top:"15.5%",left:"3%"});l.add(d);var u=Titanium.UI.createLabel({text:i.Record[0].NAME,top:"5.7%",left:"4%",textAlign:"left",color:"#5afd9b",font:{fontSize:"18dip"}});l.add(u);var p=require("ui/common/menus/Footer"),f=new p(e);l.add(f)},onerror:function(e){Ti.API.debug("STATUS: "+this.status),Ti.API.debug("TEXT: "+this.responseText),Ti.API.debug("ERROR: "+e.error),Ti.API.debug("URL: http://bonozo.com:8080/knp/get_avatar_info.php?uid="+t.UID),alert("There was an error retrieving the remote data. Try again.")},method:"GET",contentType:"text/xml",url:"http://bonozo.com:8080/knp/get_avatar_info.php?uid="+t.UID});var A=Titanium.UI.createLabel({text:_,top:"10.1%",left:"4%",textAlign:"left",color:"#5afd9b",font:{fontSize:"10dip"}});l.add(A);var S=(Titanium.UI.createLabel({text:"Online",top:"17.4%",left:"4%",textAlign:"left",color:"#5afd9b",font:{fontSize:"10dip"}}),Ti.UI.createButton({color:"#761f56",backgroundImage:"/assets/button_small_UP.png",top:"22%",right:"5%",width:"21.5%",height:"5%",title:"Unfriend",font:{fontSize:"10dip"},zIndex:50}));S.addEventListener("click",function(){var i=Titanium.UI.createAlertDialog({title:"Do you want to Unfriend "+t.NAME+"?",message:"Are you Sure?",buttonNames:["Yes","No"],cancel:1});i.show(),i.addEventListener("click",function(i){if(Titanium.API.info("e = "+JSON.stringify(i)),i.cancel!==i.index&&i.cancel!==!0)switch(i.index){case 0:var n="http://bonozo.com:8080/knp/unfriend_friend.php?uid="+e.Record[0].UID+"&friend_uid="+t.UID,a=require("/ui/common/Functions/function");a.requestServer({success:function(){items_json=JSON.parse(this.responseText),void 0!=items_json.Record&&""!=items_json.Record[0].Message&&(alert(items_json.Record[0].Message),d.close())},method:"GET",contentType:"text/xml",url:n});break;case 1:}})});var x=Ti.UI.createButton({color:"#761f56",backgroundImage:"/assets/button_small_UP.png",top:"22%",right:"5%",width:"32%",height:"5%",title:"Add friend",font:{fontSize:"10dip"},zIndex:50});x.addEventListener("click",function(){var i=(Titanium.UI.createAlertDialog({title:"You must have atleast 5 golds to send request.",message:"Are you Sure?",buttonNames:["Yes","No"],cancel:1}),"http://bonozo.com:8080/knp/send_friend_request.php?uid="+e.Record[0].UID+"&friend_uid="+t.UID+"&user_id="+t.USER_ID),n="",a=0,o=require("/ui/common/Functions/function");o.requestServer({success:function(){if(n=JSON.parse(this.responseText),a=n.Record.length,void 0!=n.Record){var e=Titanium.UI.createAlertDialog({title:"Message",message:n.Record[0],buttonNames:["OK"],cancel:0});e.addEventListener("click",function(){d.close()}),e.show()}},method:"GET",contentType:"text/xml",url:i})});var L=function(i){var n=require("/ui/common/Functions/function");_url="http://bonozo.com:8080/knp/is_friend.php?uid1="+e.Record[0].UID+"&uid2="+t.UID,n.requestServer({success:function(){items_json=JSON.parse(this.responseText),void 0!=items_json.Record&&i(items_json.Record),Ti.App.fireEvent("update_xp",{clicked_item:"StatusScreen"})},method:"GET",contentType:"text/xml",url:_url})};!function(){L(function(e){"true"==e?l.add(S):l.add(x)})}();var k=(Titanium.UI.createImageView({url:"/assets/iconReturn.png",height:"5.2%",top:"19.8%",left:"41.3%"}),Titanium.UI.createLabel({text:"FREINDSHIP METER N \nFRIEND LEVEL 2",top:"56.1%",left:"15.6%",textAlign:"left",color:"#5afd9b",font:{fontSize:"10dip"},zIndex:50}));l.add(k),"NEW_MESSAGE"==t.MESSAGE&&Ti.App.addEventListener("message_status",function(){t.MESSAGE="NO_MESSAGE",g.hide(),n()});var k=Titanium.UI.createLabel({text:"FREINDSHIP METER TRACKS HOW MUCH AND YOUR FRIEND HAVE INTERACTED WITH EACH OTHER.",bottom:"9.3%",width:"51.9%",left:"5%",textAlign:"center",color:"#5afd9b",font:{fontSize:"9dip"},zIndex:50});l.add(k);var y=require("/ui/common/drawings/AvatarThumbnail");y({height:"9%",width:"12.7%",top:"62.5%",left:"5%"},e.Record[0].USER_APPEARANCE,e.Record[0].GENDER,0,function(e){l.add(e)});var N=Ti.UI.createView({backgroundImage:"/assets/female_meterBar.png",top:"63.7%",left:"20%",width:"37%",zIndex:10,height:"5%"});l.add(N),y({height:"8%",width:"12.7%",zIndex:10,top:"70%",left:"42.4%"},t.USER_APPEARANCE,t.GENDER,0,function(e){l.add(e)});var P=Ti.UI.createView({backgroundImage:"/assets/male_meterBar.png",top:"71.7%",zIndex:10,left:"5%",width:"37%",height:"4%"});return l.add(P),d}module.exports=FreindInfo;